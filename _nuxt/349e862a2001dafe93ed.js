(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{1362:function(t,e,r){"use strict";r.r(e);r(136),r(137),r(29);var n=r(3),o=(r(36),r(5)),c=r(6),l=r(4),d=r(2),h=r(78),v={asyncData:function(t){var e=!1,r=!1,n=!1;return"quiry"==t.route.query.type?e=!0:"purchase"==t.route.query.type?r=!0:"other"==t.route.query.type&&(n=!0),{isQuiry:e,isPurchase:r,isOther:n}},data:function(){return{quiryTitle:"新店首配需求单",quiryCrateTime:"",quiryOrder:"",quiryState:"",isSelectAll:!0,tableData:[],isPurchaseSettlePow:!1}},components:{},computed:{getIsPurchaseSettlePow:function(){var t=this.$store.state.contain_power;return!!t&&!!t.isPurchaseSettlePow}},mounted:function(){var t=this.$store.state.contain_power;t&&t.isPurchaseSettlePow&&(this.isPurchaseSettlePow=t.isPurchaseSettlePow),1==this.isQuiry?this.queryQuiryList(this.$route.query.id):1==this.isPurchase?this.getPurchaseOrder():1==this.isOther&&this.getOtherPurchaseOrder(this.$route.query.id)},methods:{htmlDecodeMethod:function(t){return Object(l.n)(t)},selectAll:function(){if(this.isSelectAll)for(var t=0;t<this.tableData.length;t++)"accomplish"==this.tableData[t].status&&(this.tableData[t].select=!0);else for(var e=0;e<this.tableData.length;e++)this.tableData[e].select=!1},selectGoods:function(t){for(var e=!1,r=0;r<this.tableData.length;r++)this.tableData[r].select||(e=!0);this.isSelectAll=!(e||!t)},inputCount:function(t){this.tableData[t].total=this.tableData[t].unitPrice*this.tableData[t].amount,this.tableData[t].total=this.tableData[t].total.toFixed(2)},balance:function(){var t=this,e=[],r=[],n=!1;if(this.tableData.forEach(function(o){if(o.select&&o.amount&&parseInt(o.amount)>0){if(n=!0,o.orderId=o.orderId,t.isQuiry){o.orderId=t.$route.query.id;var c={orderId:t.$route.query.id,type:"询价单"};AnalysysAgent.track("main201002",c)}else{c={orderId:t.$route.query.id,type:"引用其他公司订单"};AnalysysAgent.track("main201002",c)}o.colour=o.specification,o.imageUrl=o.pictureAddress,o.name=o.productName,o.num=parseInt(o.amount),o.price=o.unitPrice,o.sum=o.unitPrice*o.amount,e.push(o),o.amount||r.push(o.productId)}}),!n){var o=this.getIsPurchaseSettlePow?"请选择需要去结算的商品!":"请选择提交预订单的商品！";return this.$message.error(o)}if(0!=r.length)return this.$message.error("土猫编号为"+r.toString()+"的商品数量不能为空！");this.getIsPurchaseSettlePow?(this.$store.commit(d.MutationTypes.RECORD_ORDER_PRODUCTLIST,e),this.$router.push("/confirmorder")):Object(h.g)(this,e)},addCart:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e,r,n,l,d,h,v,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e=!1,r=[],n=[],l=0;l<this.tableData.length;l++)this.tableData[l].select&&(e=!0,this.tableData[l].amount||r.push(this.tableData[l].productId),n.push(this.tableData[l]));if(e){t.next=6;break}return t.abrupt("return",this.$message.error("请选择需要添加到购物车的商品!"));case 6:if(0==r.length){t.next=8;break}return t.abrupt("return",this.$message.error("土猫编号为"+r.toString()+"的商品数量不能为空！"));case 8:if(this,0==n.length){t.next=19;break}return d=[],h={},n.forEach(function(t){0!=t.amount&&""!=t.amount||(t.amount=1),d.push({productId:t.productId,pcount:t.amount})}),h={cart:d},v=JSON.stringify(h),t.next=17,Object(c.a)(this,o.a.AddCart,v);case 17:t.sent&&(this.$message.success("购物车加入成功"),f={count:h.cart[0].pcount,productId:h.cart[0].productId},AnalysysAgent.track("main200401",f));case 19:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),lookUpSelect:function(){var t=this;return function(e){for(var r=0;r<t.tableData.length;r++)if(t.tableData[r].select)return!0}},queryQuiryList:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(e){var r,n,d,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=this,n={orderId:e},t.next=4,Object(c.a)(this,o.a.GetDemandOrderUrl,n,"GET");case 4:if(d=t.sent){for(h=0;h<d.data.list.length;h++)d.data.list[h].num=h+1,d.data.list[h].unitPrice=d.data.list[h].realPrice?d.data.list[h].realPrice.toFixed(2):d.data.list[h].unitPrice.toFixed(2),d.data.list[h].total=d.data.list[h].unitPrice*d.data.list[h].amount,d.data.list[h].total=d.data.list[h].total.toFixed(2);this.tableData=d.data.list,this.tableData.forEach(function(t){"accomplish"==t.status?t.select=!0:t.select=!1,t.productName=r.htmlDecodeMethod(t.productName)}),this.quiryCrateTime=Object(l.k)(d.data.gmtCreate),this.quiryOrder=d.data.orderId,this.quiryTitle=d.data.orderName,this.quiryState=Object(l.h)(d.data.orderStatus)}case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getPurchaseOrder:function(){var t=this,e=this.$store.state.order_purchaseOrder;if(e){for(var r=0;r<e.length;r++)e[r].select=!0,e[r].num=r+1,e[r].unitPrice=e[r].realPrice?e[r].realPrice.toFixed(2):e[r].unitPrice.toFixed(2),e[r].total=e[r].unitPrice*e[r].amount,e[r].total=e[r].total.toFixed(2);this.tableData=e,this.tableData.forEach(function(e){e.productName=t.htmlDecodeMethod(e.productName)})}},getOtherPurchaseOrder:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(e){var r,n,d,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=this,n={orderId:e},t.next=4,Object(c.a)(this,o.a.PurchaseOrderDetailUrl,n);case 4:if((d=t.sent)&&(this.quiryTitle=d.data.orderName,this.quiryCrateTime=Object(l.k)(d.data.demandOrderDate),this.quiryOrder=d.data.orderId,this.quiryState=Object(l.g)(d.data.orderStatus),d.data.list)){for(h=0;h<d.data.list.length;h++)d.data.list[h].num=h+1,d.data.list[h].unitPrice=d.data.list[h].realPrice?d.data.list[h].realPrice.toFixed(2):d.data.list[h].unitPrice.toFixed(2),d.data.list[h].total=d.data.list[h].unitPrice*d.data.list[h].amount,d.data.list[h].total=d.data.list[h].total.toFixed(2),d.data.list[h].select=!0;this.tableData=d.data.list,this.tableData.forEach(function(t){t.productName=r.htmlDecodeMethod(t.productName)})}case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},f=(r(790),r(20)),component=Object(f.a)(v,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"pageview"},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.isQuiry||t.isOther,expression:"isQuiry || isOther"}]},[r("div",{staticClass:"iv_top"},[r("span",{directives:[{name:"show",rawName:"v-show",value:t.isQuiry,expression:"isQuiry"}],staticStyle:{"padding-left":"32px","font-weight":"bold"}},[t._v("我的询价单-导入询价单")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.isOther,expression:"isOther"}],staticStyle:{"padding-left":"32px","font-weight":"bold"}},[t._v("引用其他公司订单-导入")])]),t._v(" "),r("div",{staticStyle:{"margin-top":"15px","font-size":"16px",color:"#333333"}},[t.quiryTitle?r("span",[t._v("标题："+t._s(t.quiryTitle))]):t._e(),t._v(" "),r("span",{staticStyle:{margin:"0 15px"}},[t._v("创建时间："+t._s(t.quiryCrateTime))]),t._v(" "),r("span",[t._v("订单编号："+t._s(t.quiryOrder))]),t._v(" "),r("span",{staticStyle:{"margin-left":"15px"}},[t._v("状态："+t._s(t.quiryState))])])]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.isPurchase,expression:"isPurchase"}]},[t._m(0)]),t._v(" "),r("div",{staticClass:"tableview"},[r("el-row",{staticClass:"buylist"},[r("el-col",{attrs:{span:1}},[r("div",{staticClass:"grid-content "},[t._v("选择")])]),t._v(" "),r("el-col",{attrs:{span:1}},[r("div",{staticClass:"grid-content "},[t._v("序号")])]),t._v(" "),r("el-col",{attrs:{span:2}},[r("div",{staticClass:"grid-content "},[t._v("缩略图")])]),t._v(" "),r("el-col",{attrs:{span:2}},[r("div",{staticClass:"grid-content "},[t._v("土猫编号")])]),t._v(" "),r("el-col",{attrs:{span:2}},[r("div",{staticClass:"grid-content "},[t._v("品牌")])]),t._v(" "),r("el-col",{attrs:{span:3}},[r("div",{staticClass:"grid-content "},[t._v("商品类型")])]),t._v(" "),r("el-col",{attrs:{span:7}},[r("div",{staticClass:"grid-content "},[t._v("商品名称")])]),t._v(" "),r("el-col",{attrs:{span:2}},[r("div",{staticClass:"grid-content "},[t._v("单价(元)")])]),t._v(" "),r("el-col",{attrs:{span:2}},[r("div",{staticClass:"grid-content "},[t._v("数量")])]),t._v(" "),r("el-col",{attrs:{span:2}},[r("div",{staticClass:"grid-content "},[t._v("小计")])])],1),t._v(" "),t._l(t.tableData,function(e,n){return r("el-row",{key:n,staticClass:"newslist",style:((n+1)%2==0?"background-color: #FBFBFB;":"")+(n+1===t.tableData.length?"border-bottom: 1px solid #f1f1f1;":"")},[r("el-col",{attrs:{span:1}},[r("div",{staticClass:"grid-content border"},[r("el-checkbox",{attrs:{disabled:0==e.select},on:{change:t.selectGoods},model:{value:e.select,callback:function(r){t.$set(e,"select",r)},expression:"item.select"}})],1)]),t._v(" "),r("el-col",{attrs:{span:1}},[r("div",{staticClass:"grid-content num border"},[t._v(t._s(e.num))])]),t._v(" "),r("el-col",{attrs:{span:2}},[r("div",{staticClass:"grid-content pictureAddress border"},[r("img",{attrs:{width:"40",height:"40",src:e.pictureAddress}})])]),t._v(" "),r("el-col",{attrs:{span:2}},["accomplish"==e.status||t.isPurchase?r("div",{staticClass:"grid-content productId border"},[t._v(t._s(e.productId))]):t._e(),t._v(" "),"confirmation"==e.status?r("div",{staticClass:"grid-content productId border"},[t._v("商品确认中")]):t._e(),t._v(" "),"shelving"==e.status?r("div",{staticClass:"grid-content productId border"},[t._v("商品上架中")]):t._e()]),t._v(" "),r("el-col",{attrs:{span:2}},[r("div",{staticClass:"grid-content gv_line_sty brand border"},[t._v(t._s(e.brand))])]),t._v(" "),r("el-col",{attrs:{span:3}},[r("div",{staticClass:"grid-content productType border"},[t._v(t._s(e.productType?e.productType:" "))])]),t._v(" "),r("el-col",{staticClass:"productName",attrs:{span:7}},[r("div",{staticClass:"grid-content gv_line_sty border"},[t._v(t._s(e.productName))])]),t._v(" "),r("el-col",{attrs:{span:2}},[r("div",{staticClass:"grid-content border"},[t._v(t._s(e.unitPrice))])]),t._v(" "),r("el-col",{attrs:{span:2}},[r("div",{staticClass:"grid-content border"},[r("customInput",{staticStyle:{width:"75px","text-align":"center"},attrs:{inputType:"integer",type:"text",align:"center",size:"small"},on:{change:function(e){return t.inputCount(n)}},model:{value:e.amount,callback:function(r){t.$set(e,"amount",r)},expression:"item.amount"}})],1)]),t._v(" "),r("el-col",{attrs:{span:2}},[r("div",{staticClass:"grid-content"},[t._v(t._s(e.total))])])],1)})],2),t._v(" "),r("div",{staticClass:"setterview"},[r("el-checkbox",{staticStyle:{"margin-right":"20px"},on:{change:function(e){return t.selectAll()}},model:{value:t.isSelectAll,callback:function(e){t.isSelectAll=e},expression:"isSelectAll"}},[t._v("全选")]),t._v(" "),r("el-button",{staticClass:"btn_balance",attrs:{size:"small"},on:{click:function(e){return t.balance()}}},[t._v(t._s(t.getIsPurchaseSettlePow?"去结算":"预订单"))]),t._v(" "),t.isQuiry?t._e():r("el-button",{staticClass:"btn_cart",attrs:{type:"primary",size:"small"},on:{click:t.addCart}},[t._v("加入购物车")])],1)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"iv_top"},[e("span",{staticStyle:{"padding-left":"32px","font-weight":"bold"}},[this._v("导入采购商品")])])}],!1,null,"5f0730a9",null);component.options.__file="portqueryorderlist.vue";e.default=component.exports},502:function(t,e,r){var content=r(791);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(19).default)("2f2a6d8e",content,!0,{sourceMap:!1})},790:function(t,e,r){"use strict";var n=r(502);r.n(n).a},791:function(t,e,r){(t.exports=r(18)(!1)).push([t.i,'.pageview[data-v-5f0730a9]{width:100%;height:100%}.tableview[data-v-5f0730a9]{margin-top:20px}.setterview[data-v-5f0730a9]{margin-top:50px;text-align:right;padding:10px 30px;border:1px solid #ededed;background-color:#fbfbfb}.iv_top[data-v-5f0730a9]{width:100%;margin:0 auto;display:table;content:" ";border:1px solid #ececec;padding:11px 0;font-size:14px;color:#000}.buylist[data-v-5f0730a9]{color:#858585;background:#f5f5f5;height:40px;line-height:40px;margin-top:20px;text-align:center;margin-bottom:14px}.newslist[data-v-5f0730a9]{text-align:center;border-left:1px solid #f1f1f1;border-right:1px solid #f1f1f1;border-top:1px solid #f1f1f1;height:60px;line-height:60px}.gv_line_sty[data-v-5f0730a9]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.border[data-v-5f0730a9]{border-right:1px solid #f1f1f1}.btn_balance[data-v-5f0730a9]{margin-right:15px;color:#1b6dc5}.btn_balance[data-v-5f0730a9],.btn_cart[data-v-5f0730a9]{width:137px;height:40px;font-size:16px}.btn_cart[data-v-5f0730a9]{background-color:#1b6dc5}',""])}}]);