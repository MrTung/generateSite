(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{1322:function(t,e,r){"use strict";r.r(e);r(136),r(137),r(29);var n=r(3),l=(r(36),r(5)),o=r(6),c=r(4),d=r(2),h=r(78),m={asyncData:function(t){var e=!1,r=!1,n=!1;return"quiry"==t.route.query.type?e=!0:"purchase"==t.route.query.type?r=!0:"other"==t.route.query.type&&(n=!0),{isQuiry:e,isPurchase:r,isOther:n}},data:function(){return{quiryTitle:"新店首配需求单",quiryCrateTime:"",quiryOrder:"",quiryState:"",isSelectAll:!0,tableData:[],isPurchaseSettlePow:!1}},components:{},computed:{getIsPurchaseSettlePow:function(){var t=this.getPower(this);return!!t&&!!t.isPurchaseSettlePow}},mounted:function(){var t=this.getPower(this);t&&t.isPurchaseSettlePow&&(this.isPurchaseSettlePow=t.isPurchaseSettlePow),1==this.isQuiry?this.queryQuiryList(this.$route.query.id):1==this.isPurchase?this.getPurchaseOrder():1==this.isOther&&this.getOtherPurchaseOrder(this.$route.query.id)},methods:{htmlDecodeMethod:function(t){return Object(c.n)(t)},selectAll:function(){if(this.isSelectAll)for(var t=0;t<this.tableData.length;t++)this.tableData[t].select=!0;else for(var e=0;e<this.tableData.length;e++)this.tableData[e].select=!1},selectGoods:function(t){for(var e=!1,r=0;r<this.tableData.length;r++)this.tableData[r].select||(e=!0);this.isSelectAll=!(e||!t)},inputCount:function(t){this.tableData[t].total=this.tableData[t].unitPrice*this.tableData[t].amount,this.tableData[t].total=this.tableData[t].total.toFixed(2)},balance:function(){var t=[],e=[],r=!1;if(this.tableData.forEach(function(n){n.select&&(r=!0,n.orderId=n.orderId,n.colour=n.specification,n.imageUrl=n.pictureAddress,n.name=n.productName,n.num=parseInt(n.amount),n.price=n.unitPrice,n.sum=n.unitPrice*n.amount,t.push(n),n.amount||e.push(n.productId))}),!r){var n=this.getIsPurchaseSettlePow?"请选择需要去结算的商品!":"请选择提交预订单的商品！";return this.$message.error(n)}if(0!=e.length)return this.$message.error("土猫编号为"+e.toString()+"的商品数量不能为空！");this.getIsPurchaseSettlePow?(this.$store.commit(d.MutationTypes.RECORD_ORDER_PRODUCTLIST,t),this.$router.push("/confirmorder?queryorder=true")):Object(h.g)(this,t)},addCart:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e,r,n,c,d,h,m,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e=!1,r=[],n=[],c=0;c<this.tableData.length;c++)this.tableData[c].select&&(e=!0,this.tableData[c].amount||r.push(this.tableData[c].productId),n.push(this.tableData[c]));if(e){t.next=6;break}return t.abrupt("return",this.$message.error("请选择需要添加到购物车的商品!"));case 6:if(0==r.length){t.next=8;break}return t.abrupt("return",this.$message.error("土猫编号为"+r.toString()+"的商品数量不能为空！"));case 8:if(this,0==n.length){t.next=19;break}return d=[],h={},n.forEach(function(t){0!=t.amount&&""!=t.amount||(t.amount=1),d.push({productId:t.productId,pcount:t.amount})}),h={cart:d},m=JSON.stringify(h),t.next=17,Object(o.a)(this,l.a.AddCart,m);case 17:t.sent&&(f={count:h.cart[0].pcount,productId:h.cart[0].productId},AnalysysAgent.track("main200401",f),this.$message.success("购物车加入成功"));case 19:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),lookUpSelect:function(){var t=this;return function(e){for(var r=0;r<t.tableData.length;r++)if(t.tableData[r].select)return!0}},queryQuiryList:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(e){var r,n,d,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=this,n={orderId:e},t.next=4,Object(o.a)(this,l.a.GetDemandOrderUrl,n,"GET");case 4:if(d=t.sent){for(h=0;h<d.data.list.length;h++)d.data.list[h].num=h+1,d.data.list[h].unitPrice=d.data.list[h].realPrice?d.data.list[h].realPrice.toFixed(2):d.data.list[h].unitPrice.toFixed(2),d.data.list[h].total=d.data.list[h].unitPrice*d.data.list[h].amount,d.data.list[h].total=d.data.list[h].total.toFixed(2),d.data.list[h].select=!0;this.tableData=d.data.list,this.tableData.forEach(function(t){t.productName=r.htmlDecodeMethod(t.productName)}),this.quiryCrateTime=Object(c.k)(d.data.demandOrderDate),this.quiryOrder=d.data.orderId,this.quiryTitle=d.data.orderName,this.quiryState=Object(c.h)(d.data.orderStatus)}case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getPurchaseOrder:function(){var t=this,e=this.$store.state.order_purchaseOrder;if(e){for(var r=0;r<e.length;r++)e[r].select=!0,e[r].num=r+1,e[r].unitPrice=e[r].realPrice?e[r].realPrice.toFixed(2):e[r].unitPrice.toFixed(2),e[r].total=e[r].unitPrice*e[r].amount,e[r].total=e[r].total.toFixed(2);this.tableData=e,this.tableData.forEach(function(e){e.productName=t.htmlDecodeMethod(e.productName)})}},getOtherPurchaseOrder:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(e){var r,n,d,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=this,n={orderId:e},t.next=4,Object(o.a)(this,l.a.PurchaseOrderDetailUrl,n);case 4:if((d=t.sent)&&(this.quiryTitle=d.data.orderName,this.quiryCrateTime=Object(c.k)(d.data.demandOrderDate),this.quiryOrder=d.data.orderId,this.quiryState=Object(c.g)(d.data.orderStatus),d.data.list)){for(h=0;h<d.data.list.length;h++)d.data.list[h].num=h+1,d.data.list[h].unitPrice=d.data.list[h].realPrice?d.data.list[h].realPrice.toFixed(2):d.data.list[h].unitPrice.toFixed(2),d.data.list[h].total=d.data.list[h].unitPrice*d.data.list[h].amount,d.data.list[h].total=d.data.list[h].total.toFixed(2),d.data.list[h].select=!0;this.tableData=d.data.list,this.tableData.forEach(function(t){t.productName=r.htmlDecodeMethod(t.productName)})}case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},f=(r(856),r(20)),component=Object(f.a)(m,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"pageview"},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.isQuiry||t.isOther,expression:"isQuiry || isOther"}]},[r("div",{staticClass:"iv_top"},[r("span",{directives:[{name:"show",rawName:"v-show",value:t.isQuiry,expression:"isQuiry"}],staticStyle:{"padding-left":"32px","font-weight":"bold"}},[t._v("我的询价单-导入询价单")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.isOther,expression:"isOther"}],staticStyle:{"padding-left":"32px","font-weight":"bold"}},[t._v("引用其他公司订单-导入")])]),t._v(" "),r("div",{staticStyle:{"margin-top":"15px"}},[t.quiryTitle?r("span",[t._v("标题："+t._s(t.quiryTitle))]):t._e(),t._v(" "),r("span",{staticStyle:{margin:"0 15px"}},[t._v("创建时间："+t._s(t.quiryCrateTime))]),t._v(" "),r("span",[t._v("订单编号："+t._s(t.quiryOrder))]),t._v(" "),r("span",{staticStyle:{"margin-left":"15px"}},[t._v("状态："+t._s(t.quiryState))])])]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.isPurchase,expression:"isPurchase"}]},[t._m(0)]),t._v(" "),r("div",{staticClass:"tableview"},[r("el-table",{staticStyle:{width:"1800px"},attrs:{data:t.tableData}},[r("span",[r("el-table-column",{attrs:{resizable:!1,fixed:"",label:"选择",width:"60px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-checkbox",{on:{change:t.selectGoods},model:{value:e.row.select,callback:function(r){t.$set(e.row,"select",r)},expression:"tableData.row.select"}})]}}])})],1),t._v(" "),r("span",[r("el-table-column",{attrs:{resizable:!1,fixed:"",prop:"num",label:"序号",width:"60px",align:"center"}})],1),t._v(" "),r("span",[r("el-table-column",{attrs:{resizable:!1,prop:"pictureAddress",label:"缩略图",width:"80px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[r("img",{attrs:{width:"60",height:"60",src:t.row.pictureAddress}})]}}])})],1),t._v(" "),r("span",[r("el-table-column",{attrs:{resizable:!1,prop:"productId",label:"土猫编号",width:"80px",align:"center"}})],1),t._v(" "),r("span",[r("el-table-column",{attrs:{resizable:!1,prop:"brand",label:"品牌",width:"80px",align:"center"}})],1),t._v(" "),r("span",[r("el-table-column",{attrs:{resizable:!1,prop:"productType",label:"商品类型",width:"100px",align:"center"}})],1),t._v(" "),r("span",[r("el-table-column",{attrs:{resizable:!1,prop:"productName",label:"商品名称",width:"200px",align:"center"}})],1),t._v(" "),r("span",[r("el-table-column",{attrs:{resizable:!1,prop:"unitPrice",label:"单价（元）",width:"100px",align:"center"}})],1),t._v(" "),r("span",[r("el-table-column",{attrs:{resizable:!1,prop:"amount",label:"数量",width:"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-input",{attrs:{align:"center",size:"small"},on:{change:function(r){return t.inputCount(e.$index)}},model:{value:e.row.amount,callback:function(r){t.$set(e.row,"amount",r)},expression:"tableData.row.amount"}})]}}])})],1),t._v(" "),r("span",[r("el-table-column",{attrs:{resizable:!1,prop:"total",label:"小计",width:"100px",align:"center"}})],1)])],1),t._v(" "),r("div",{staticClass:"setterview"},[r("el-checkbox",{staticStyle:{"margin-right":"20px"},on:{change:function(e){return t.selectAll()}},model:{value:t.isSelectAll,callback:function(e){t.isSelectAll=e},expression:"isSelectAll"}},[t._v("全选")]),t._v(" "),r("el-button",{staticStyle:{width:"100px"},attrs:{size:"small"},on:{click:function(e){return t.balance()}}},[t._v(t._s(t.getIsPurchaseSettlePow?"去结算":"预订单"))]),t._v(" "),t.isQuiry?t._e():r("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary",size:"small"},on:{click:t.addCart}},[t._v("加入购物车")])],1)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"iv_top"},[e("span",{staticStyle:{"padding-left":"32px","font-weight":"bold"}},[this._v("导入采购商品")])])}],!1,null,"79fa0689",null);component.options.__file="portqueryorderlist.vue";e.default=component.exports},531:function(t,e,r){var content=r(857);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(19).default)("584366ca",content,!0,{sourceMap:!1})},856:function(t,e,r){"use strict";var n=r(531);r.n(n).a},857:function(t,e,r){(t.exports=r(18)(!1)).push([t.i,'.pageview[data-v-79fa0689]{width:100%;height:100%}.tableview[data-v-79fa0689]{margin-top:20px}.setterview[data-v-79fa0689]{margin-top:50px;text-align:right}.iv_top[data-v-79fa0689]{width:100%;margin:0 auto;display:table;content:" ";border:1px solid #ececec;padding:11px 0;font-size:14px;color:#000}',""])}}]);