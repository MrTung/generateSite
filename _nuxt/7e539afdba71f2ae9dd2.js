(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{1364:function(t,e,r){"use strict";r.r(e);r(29);var n=r(3),d=r(5),o=r(6),c=r(4),l={asyncData:function(t){var e="";return"look"==t.route.query.type?e="查看":"audit"==t.route.query.type&&(e="审核"),{typeName:e}},data:function(){return{isLook:!1,isAudit:!1,typeName:"",orderId:"",auditPerson:"总部",tableData:[],totalAmount:0,findAudit:"",auditFind:"approve",remaind:"",auditBtn:"审核通过支付订单"}},components:{},computed:{},mounted:function(){this.queryPurchaseList(this.$route.query.id)},methods:{htmlDecodeMethod:function(t){return Object(c.n)(t)},queryPurchaseList:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(e){var r,n,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={orderId:e},t.next=3,Object(o.a)(this,d.a.QueryPurchaseOrderUrl,r);case 3:if(n=t.sent){for(this.orderId=n.data.list[0].orderId,this.tableData=n.data.list,c=0;c<this.tableData.length;c++)this.tableData[c].unitPrice=this.tableData[c].realPrice?this.tableData[c].realPrice.toFixed(2):this.tableData[c].unitPrice.toFixed(2),this.tableData[c].totalPrice=this.tableData[c].totalPrice.toFixed(2),this.totalAmount=(parseFloat(this.totalAmount)+parseFloat(this.tableData[c].totalPrice)).toFixed(2);"pending"==n.data.orderStatus&&"audit"==this.$route.query.type&&(this.isAudit=!0),"approve"!=n.data.orderStatus&&"pending_refuse"!=n.data.orderStatus||(this.isLook=!0),this.auditPerson=n.data.username,this.isLook&&("approve"==n.data.orderStatus?this.findAudit="通过":this.findAudit="不通过",this.remaind=n.data.audit)}case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),back:function(){this.$router.go(-1)},radioChange:function(t){this.auditBtn="approve"==t?"审核通过支付订单":"审核驳回"},BtnAudit:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=this.remaind){t.next=2;break}return t.abrupt("return",this.$message.error("请输入补充说明内容"));case 2:return e={orderId:this.orderId,orderStatus:this.auditFind,audit:this.remaind},r={orderId:this.orderId,orderStatus:this.auditFind},AnalysysAgent.track("main201401",r),t.next=7,Object(o.a)(this,d.a.PurchaseOrderStUrl,e);case 7:t.sent&&(this.$message.success("审核完成"),this.$router.go(-1));case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},v=(r(792),r(20)),component=Object(v.a)(l,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"pageview"},[r("div",[r("h3",[r("span",{staticClass:"btn",on:{click:t.back}},[t._v("采购单审核")]),t._v(" -\n      "),t.isAudit?r("span",[t._v("商品明细")]):t._e(),t._v(" "),t.isLook||t.isAudit?t._e():r("span",[t._v("查看")])]),t._v(" "),r("span",{staticStyle:{"font-size":"16px",color:"#454545"}},[t._v("订单编号: "+t._s(t.orderId))])]),t._v(" "),r("div",{staticClass:"tableview"},[r("el-row",{staticClass:"buylist"},[r("el-col",{attrs:{span:1}},[r("div",{staticClass:"grid-content "},[t._v("序号")])]),t._v(" "),r("el-col",{attrs:{span:2}},[r("div",{staticClass:"grid-content "},[t._v("缩略图")])]),t._v(" "),r("el-col",{attrs:{span:2}},[r("div",{staticClass:"grid-content "},[t._v("土猫编码")])]),t._v(" "),r("el-col",{attrs:{span:2}},[r("div",{staticClass:"grid-content "},[t._v("品牌")])]),t._v(" "),r("el-col",{attrs:{span:3}},[r("div",{staticClass:"grid-content "},[t._v("商品类型")])]),t._v(" "),r("el-col",{attrs:{span:9}},[r("div",{staticClass:"grid-content "},[t._v("商品名称")])]),t._v(" "),r("el-col",{attrs:{span:2}},[r("div",{staticClass:"grid-content "},[t._v("单价 (元)")])]),t._v(" "),r("el-col",{attrs:{span:1}},[r("div",{staticClass:"grid-content "},[t._v("商品数量")])]),t._v(" "),r("el-col",{attrs:{span:2}},[r("div",{staticClass:"grid-content "},[t._v("小计")])])],1),t._v(" "),t._l(t.tableData,function(e,n){return r("el-row",{key:n,staticClass:"newslist"},[r("el-col",{attrs:{span:1}},[r("div",{staticClass:"grid-content border"},[t._v(t._s(n+1))])]),t._v(" "),r("el-col",{attrs:{span:2}},[r("div",{staticClass:"grid-content border"},[r("img",{attrs:{width:"40",height:"40",src:e.pictureAddress}})])]),t._v(" "),r("el-col",{attrs:{span:2}},[r("div",{staticClass:"grid-content border"},[t._v(t._s(e.productId))])]),t._v(" "),r("el-col",{attrs:{span:2}},[r("div",{staticClass:"grid-content border"},[t._v(t._s(e.brand))])]),t._v(" "),r("el-col",{attrs:{span:3}},[r("div",{staticClass:"grid-content border"},[t._v(t._s(e.productType))])]),t._v(" "),r("el-col",{staticClass:"productname",attrs:{span:9}},[r("div",{staticClass:"grid-content"},[t._v(t._s(e.productName))])]),t._v(" "),r("el-col",{attrs:{span:2}},[r("div",{staticClass:"grid-content border",staticStyle:{"border-left":"1px solid #f1f1f1"}},[t._v(t._s(e.unitPrice))])]),t._v(" "),r("el-col",{attrs:{span:1}},[r("div",{staticClass:"grid-content border"},[t._v(t._s(e.amount))])]),t._v(" "),r("el-col",{attrs:{span:2}},[r("div",{staticClass:"grid-content"},[t._v(t._s(e.totalPrice))])])],1)})],2),t._v(" "),r("div",{staticClass:"total_price"},[r("el-row",[r("el-col",{attrs:{span:24}},[r("div",{staticClass:"grid-content price"},[t._v("总计："+t._s(t.totalAmount))])])],1)],1),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.isLook,expression:"isLook"}],staticClass:"auditview"},[r("span",{staticStyle:{"font-size":"16px"}},[t._v("采购人："+t._s(t.auditPerson))]),t._v(" "),r("span",{staticStyle:{margin:"10px 0"}},[t._v("审核结果：   "+t._s(t.findAudit))]),t._v(" "),r("span",[t._v("补充说明：   "+t._s(t.remaind))])]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.isAudit,expression:"isAudit"}],staticClass:"auditview"},[r("span",{staticStyle:{"font-size":"16px"}},[t._v("采购人："+t._s(t.auditPerson))]),t._v(" "),r("div",{staticClass:"auditview_find"},[r("span",{staticStyle:{margin:"10px 0"}},[t._v("审核结果：  ")]),t._v(" "),r("el-radio",{attrs:{label:"approve"},on:{change:t.radioChange},model:{value:t.auditFind,callback:function(e){t.auditFind=e},expression:"auditFind"}},[t._v("通过")]),t._v(" "),r("el-radio",{attrs:{label:"pending_refuse"},on:{change:t.radioChange},model:{value:t.auditFind,callback:function(e){t.auditFind=e},expression:"auditFind"}},[t._v("不通过")])],1),t._v(" "),r("div",{staticClass:"auditview_ex"},[r("span",{staticStyle:{"vertical-align":"top"}},[t._v("补充说明：  ")]),t._v(" "),r("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",maxlength:"500",autosize:{minRows:2,maxRows:5},placeholder:"审核批注(并自动记录审核人)"},model:{value:t.remaind,callback:function(e){t.remaind=e},expression:"remaind"}})],1),t._v(" "),r("div",[r("el-button",{staticStyle:{width:"150px","margin-top":"15px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.BtnAudit()}}},[t._v(t._s(t.auditBtn))])],1)])])},[],!1,null,"fed41d28",null);component.options.__file="purchaseorderauditing.vue";e.default=component.exports},503:function(t,e,r){var content=r(793);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(19).default)("f465c07e",content,!0,{sourceMap:!1})},792:function(t,e,r){"use strict";var n=r(503);r.n(n).a},793:function(t,e,r){(t.exports=r(18)(!1)).push([t.i,".pageview[data-v-fed41d28]{width:100%;height:100%}h3[data-v-fed41d28]{color:#000;font-size:14px;margin-bottom:22px;border:1px solid #ececec;padding-left:30px;height:44px;line-height:44px}.btn[data-v-fed41d28]:hover{color:#0d76e7;cursor:pointer}.buylist[data-v-fed41d28]{color:#858585;background:#f5f5f5;height:40px;line-height:40px;margin-top:18px;text-align:center;margin-bottom:15px}.newslist[data-v-fed41d28]{text-align:center;border:1px solid #f1f1f1;height:60px;line-height:60px}.border[data-v-fed41d28]{border-right:1px solid #f1f1f1}.auditview[data-v-fed41d28]{display:grid;margin-top:23px;color:#000}.total_price[data-v-fed41d28]{height:40px;line-height:40px;background:#f5f5f5;font-size:14px;margin-top:15px}.total_price .price[data-v-fed41d28]{padding-right:30px;float:right}.auditview_find[data-v-fed41d28]{margin:10px 0}.auditview_ex[data-v-fed41d28]{display:inline}table[data-v-fed41d28]{width:100%;height:56px;border:1px solid #ececec}.productname[data-v-fed41d28]{line-height:15px;text-align:left;margin-top:20px;padding:0 10px}",""])}}]);