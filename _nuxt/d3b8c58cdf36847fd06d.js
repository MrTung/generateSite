(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{1305:function(e,r,t){"use strict";t.r(r);t(29);var o=t(3),n=t(374),l=t(5),d=t(6),c={asyncData:function(e){var r=!1,t={},o=[];return e.query.params&&(r=!0,o=[(t=JSON.parse(e.query.params)).provinceId||"",t.cityId||"",t.districtId||""]),{rules:{consigneeName:[{required:!0,message:"请输入收货人",trigger:"blur"}],mobile:[{required:!0,message:"请输入收货人手机",trigger:"blur"}],addressName:[{required:!0,message:"请输入详细地址",trigger:"blur"}]},isEdit:r,ruleForm:t,areaInfo:o}},components:{"v-cityPicker":n.a},data:function(){return{areaInfo:[],isverfiyPhone:!0,isEdit:!1,ruleForm:{consigneeName:"",mobile:"",addressName:"",isDefault:"",provinceId:"",cityId:"",districtId:""},errors:{areaInfo:"",mobile:""},rules:{consigneeName:[{required:!0,message:"请输入收货人",trigger:"blur"}],mobile:[{required:!0,message:"请输入收货人手机",trigger:"blur"}],addressName:[{required:!0,message:"请输入详细地址",trigger:"blur"}]}}},computed:{},mounted:function(){},methods:{getData:function(){this.$route.query.params&&(this.isEdit=!0,this.ruleForm=this.$route.query.params,this.areaInfo=[this.ruleForm.provinceId||"",this.ruleForm.cityId||"",this.ruleForm.districtId||""])},saveAddress:function(e){var r=this;this.$refs[e].validate(function(e){return!!e&&(r.isverfiyPhone?r.areaInfo&&r.areaInfo.length>0?(r.errors.areaInfo="",r.checkInfo()):r.errors.areaInfo="请选择收票人地区":r.errors.mobile="收货人手机号有误，请重新输入",!0)})},checkInfo:function(){this.isEdit?(this.updateAddress(),this.ruleForm.isDefault&&this.setDefaultAddress(this.ruleForm.addressId)):this.addaddress()},setDefaultAddress:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(r){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={addressId:r},e.next=3,Object(d.a)(this,l.a.SetDefaultAddressurl,t);case 3:e.sent&&this.getAddresslist();case 5:case"end":return e.stop()}},e,this)}));return function(r){return e.apply(this,arguments)}}(),addaddress:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=JSON.stringify({addressName:this.ruleForm.addressName,consigneeName:this.ruleForm.consigneeName,mobile:this.ruleForm.mobile,provinceId:this.ruleForm.provinceId,cityId:this.ruleForm.cityId,districtId:this.ruleForm.districtId,isDefault:this.ruleForm.isDefault?"0":"1",zipcode:"310000"}),e.next=3,Object(d.a)(this,l.a.AddRecieverAddressUrl,r);case 3:e.sent&&(this.$message.success("新增地址成功！"),this.$router.go(-1));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),updateAddress:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=JSON.stringify({addressId:this.ruleForm.addressId,addressName:this.ruleForm.addressName,consigneeName:this.ruleForm.consigneeName,mobile:this.ruleForm.mobile,provinceId:this.ruleForm.provinceId,cityId:this.ruleForm.cityId,districtId:this.ruleForm.districtId,zipcode:"310000"}),e.next=3,Object(d.a)(this,l.a.UpdateRecieverAddressurl,r,"POST");case 3:e.sent&&(this.$message.success("修改地址成功！"),this.$router.go(-1));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),changePhone:function(e){if(e&&e.length>0){/^[1][3,4,5,7,8][0-9]{9}$/.test(e)?(this.errors.mobile="",this.isverfiyPhone=!0):(this.errors.mobile="请输入正确格式的手机号码",this.isverfiyPhone=!1)}},onResultChange:function(e){this.ruleForm.provinceId=e[0],this.ruleForm.cityId=e[1],this.ruleForm.districtId=e[2],this.areaInfo=e}}},m=(t(891),t(20)),component=Object(m.a)(c,function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("div",{staticClass:"niv_top"},[e._v("收货地址管理-新增收货地址")]),e._v(" "),t("div",{staticClass:"niv_new"},[t("div",[t("el-form",{ref:"ruleForm",staticClass:"ruleForm niv_form1",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{ref:"consigneeName",attrs:{label:"收货人:",prop:"consigneeName"}},[t("el-input",{attrs:{placeholder:"请输入收货人"},model:{value:e.ruleForm.consigneeName,callback:function(r){e.$set(e.ruleForm,"consigneeName",r)},expression:"ruleForm.consigneeName"}})],1),e._v(" "),t("el-form-item",{ref:"mobile",attrs:{label:"收货人手机:",prop:"mobile",error:e.errors.mobile}},[t("customInput",{attrs:{inputType:"number",maxlength:"11",placeholder:"请输入收货人手机"},on:{change:e.changePhone},model:{value:e.ruleForm.mobile,callback:function(r){e.$set(e.ruleForm,"mobile",r)},expression:"ruleForm.mobile"}})],1),e._v(" "),t("el-form-item",{ref:"addressId",attrs:{label:"收货人地区:",error:e.errors.areaInfo,required:""}},[t("v-cityPicker",{ref:"cityPicker",attrs:{value:e.areaInfo},on:{"on-change":e.onResultChange}})],1),e._v(" "),t("el-form-item",{ref:"addressName",attrs:{label:"详细地址:",prop:"addressName"}},[t("el-input",{attrs:{placeholder:"请输入详细地址"},model:{value:e.ruleForm.addressName,callback:function(r){e.$set(e.ruleForm,"addressName",r)},expression:"ruleForm.addressName"}})],1),e._v(" "),t("el-form-item",{staticStyle:{width:"300px"},attrs:{prop:"isDefault",size:"mini",label:""}},[t("el-checkbox",{model:{value:e.ruleForm.isDefault,callback:function(r){e.$set(e.ruleForm,"isDefault",r)},expression:"ruleForm.isDefault"}},[e._v("默认地址")])],1)],1)],1),e._v(" "),t("el-button",{staticClass:"niv_btn_save",attrs:{type:"primary"},on:{click:function(r){return e.saveAddress("ruleForm")}}},[e._v("保 存")])],1)])},[],!1,null,"4baa5f2f",null);component.options.__file="newaddress.vue";r.default=component.exports},548:function(e,r,t){var content=t(892);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,t(19).default)("a1875446",content,!0,{sourceMap:!1})},891:function(e,r,t){"use strict";var o=t(548);t.n(o).a},892:function(e,r,t){(e.exports=t(18)(!1)).push([e.i,".niv_top[data-v-4baa5f2f]{border:1px solid #ececec;padding:11px 32px;font-weight:700;font-size:14px;color:#000}.niv_new[data-v-4baa5f2f]{margin-top:60px;margin-left:165px}.niv_normal_select[data-v-4baa5f2f]{padding:5px 11px;font-size:18px;color:#1368c3;border:1px solid #1368c3;border-radius:2px}.niv_normal_noselect[data-v-4baa5f2f]{padding:5px 11px;font-size:18px;color:#737373;border:1px solid #737373;border-radius:2px}.niv_form1[data-v-4baa5f2f]{width:450px;margin-top:45px}.niv_form2[data-v-4baa5f2f]{width:450px;margin-top:20px}.el-form-item[data-v-4baa5f2f] .el-form-item__label{font-size:14px!important;color:#333!important}.el-form[data-v-4baa5f2f] .el-form-item{margin-bottom:18px!important}.niv_explain[data-v-4baa5f2f]{font-size:14px;color:#e3211a}.niv_btn_save[data-v-4baa5f2f]{width:350px;height:45px;margin-top:70px;margin-left:100px;background:#1b6dc5;border-radius:2px;font-size:20px;color:#fff}",""])}}]);