(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{1320:function(t,e,r){"use strict";r.r(e);r(29);var n=r(3),l=(r(36),r(5)),o=r(6),c=r(4),h=r(2),d=r(78),v={asyncData:function(t){var e=!1,r=!1,n=!1;return"quiry"==t.route.query.type?e=!0:"purchase"==t.route.query.type?r=!0:"other"==t.route.query.type&&(n=!0),{isQuiry:e,isPurchase:r,isOther:n}},data:function(){return{quiryTitle:"新店首配需求单",quiryCrateTime:"",quiryOrder:"",quiryState:"",isSelectAll:!0,isPurchaseSettlePow:!1}},components:{},computed:{getIsPurchaseSettlePow:function(){var t=this.getPower(this);return!!t&&!!t.isPurchaseSettlePow},tableData:function(){return this.getPurchaseOrder()}},mounted:function(){var t=this.getPower(this);t&&t.isPurchaseSettlePow&&(this.isPurchaseSettlePow=t.isPurchaseSettlePow)},methods:{htmlDecodeMethod:function(t){return Object(c.n)(t)},selectAll:function(){if(this.isSelectAll)for(var t=0;t<this.tableData.length;t++)this.tableData[t].select=!0;else for(var e=0;e<this.tableData.length;e++)this.tableData[e].select=!1},selectGoods:function(t){for(var e=!1,r=0;r<this.tableData.length;r++)this.tableData[r].select||(e=!0);this.isSelectAll=!(e||!t)},inputCount:function(t){this.tableData[t].total=this.tableData[t].unitPrice*this.tableData[t].amount,this.tableData[t].total=this.tableData[t].total.toFixed(2)},balance:function(){var t=[],e=[],r=!1;if(this.tableData.forEach(function(n){n.select&&(r=!0,n.orderId=n.orderId,n.colour=n.specification,n.imageUrl=n.pictureAddress,n.name=n.productName,n.num=parseInt(n.amount),n.price=n.unitPrice,n.sum=n.unitPrice*n.amount,t.push(n),n.amount||e.push(n.productId))}),!r){var n=this.getIsPurchaseSettlePow?"请选择需要去结算的商品!":"请选择提交预订单的商品！";return this.$message.error(n)}if(0!=e.length)return this.$message.error("土猫编号为"+e.toString()+"的商品数量不能为空！");this.getIsPurchaseSettlePow?(this.$store.commit(h.MutationTypes.RECORD_ORDER_PRODUCTLIST,t),this.$router.push("/confirmorder")):Object(d.g)(this,t)},addCart:function(){for(var t=!1,e=[],r=[],n=0;n<this.tableData.length;n++)this.tableData[n].select&&(t=!0,this.tableData[n].amount||e.push(this.tableData[n].productId),r.push(this.tableData[n]));if(!t)return this.$message.error("请选择需要添加到购物车的商品!");if(0!=e.length)return this.$message.error("土猫编号为"+e.toString()+"的商品数量不能为空！");var l=this;0!=r.length&&r.forEach(function(t){l.queryAddCart(t.productId,t.amount)})},queryAddCart:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(e,r){var n,c,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={cart:[{productId:e,pcount:r}]},c=JSON.stringify(n),t.next=4,Object(o.a)(this,l.a.AddCart,c);case 4:t.sent&&(h={count:n.cart[0].pcount,productId:n.cart[0].productId},AnalysysAgent.track("main200401",h),this.$message.success("购物车加入成功"));case 6:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),lookUpSelect:function(){var t=this;return function(e){for(var r=0;r<t.tableData.length;r++)if(t.tableData[r].select)return!0}},getPurchaseOrder:function(){var t=this,e=this.$store.state.order_purchaseOrder;if(e){for(var r=0;r<e.length;r++)e[r].select=!0,e[r].num=r+1,e[r].unitPrice=e[r].realPrice?e[r].realPrice.toFixed(2):e[r].unitPrice.toFixed(2),e[r].total=e[r].unitPrice*e[r].amount,e[r].total=e[r].total.toFixed(2);return e.forEach(function(e){e.productName=t.htmlDecodeMethod(e.productName)}),e}}}},m=(r(858),r(20)),component=Object(m.a)(v,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"pageview"},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.isQuiry||t.isOther,expression:"isQuiry || isOther"}]},[r("h1",{directives:[{name:"show",rawName:"v-show",value:t.isQuiry,expression:"isQuiry"}],staticStyle:{color:"black"}},[t._v("我的询价单-导入询价单")]),t._v(" "),r("h1",{directives:[{name:"show",rawName:"v-show",value:t.isOther,expression:"isOther"}],staticStyle:{color:"black"}},[t._v("引用其他公司订单-导入")]),t._v(" "),r("div",{staticStyle:{"margin-top":"15px"}},[t.quiryTitle?r("span",[t._v("标题："+t._s(t.quiryTitle))]):t._e(),t._v(" "),r("span",{staticStyle:{margin:"0 15px"}},[t._v("创建时间："+t._s(t.quiryCrateTime))]),t._v(" "),r("span",[t._v("订单编号："+t._s(t.quiryOrder))]),t._v(" "),r("span",{staticStyle:{"margin-left":"15px"}},[t._v("状态："+t._s(t.quiryState))])])]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.isPurchase,expression:"isPurchase"}]},[r("h1",{staticStyle:{color:"black"}},[t._v("导入采购商品")])]),t._v(" "),r("div",{staticClass:"tableview"},[r("el-table",{staticStyle:{width:"1800px"},attrs:{data:t.tableData}},[r("span",[r("el-table-column",{attrs:{resizable:!1,fixed:"",label:"选择",width:"60px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-checkbox",{on:{change:t.selectGoods},model:{value:e.row.select,callback:function(r){t.$set(e.row,"select",r)},expression:"tableData.row.select"}})]}}])})],1),t._v(" "),r("span",[r("el-table-column",{attrs:{resizable:!1,fixed:"",prop:"num",label:"序号",width:"60px",align:"center"}})],1),t._v(" "),r("span",[r("el-table-column",{attrs:{resizable:!1,prop:"pictureAddress",label:"缩略图",width:"80px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[r("img",{attrs:{width:"60",height:"60",src:t.row.pictureAddress}})]}}])})],1),t._v(" "),r("span",[r("el-table-column",{attrs:{resizable:!1,prop:"productId",label:"土猫编号",width:"80px",align:"center"}})],1),t._v(" "),r("span",[r("el-table-column",{attrs:{resizable:!1,prop:"brand",label:"品牌",width:"80px",align:"center"}})],1),t._v(" "),r("span",[r("el-table-column",{attrs:{resizable:!1,prop:"productType",label:"商品类型",width:"100px",align:"center"}})],1),t._v(" "),r("span",[r("el-table-column",{attrs:{resizable:!1,prop:"productName",label:"商品名称",width:"200px",align:"center"}})],1),t._v(" "),r("span",[r("el-table-column",{attrs:{resizable:!1,prop:"unitPrice",label:"单价（元）",width:"100px",align:"center"}})],1),t._v(" "),r("span",[r("el-table-column",{attrs:{resizable:!1,prop:"amount",label:"数量",width:"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-input",{attrs:{align:"center",size:"small"},on:{change:function(r){return t.inputCount(e.$index)}},model:{value:e.row.amount,callback:function(r){t.$set(e.row,"amount",r)},expression:"tableData.row.amount"}})]}}])})],1),t._v(" "),r("span",[r("el-table-column",{attrs:{resizable:!1,prop:"total",label:"小计",width:"100px",align:"center"}})],1)])],1),t._v(" "),r("div",{staticClass:"setterview"},[r("el-checkbox",{staticStyle:{"margin-right":"20px"},on:{change:function(e){return t.selectAll()}},model:{value:t.isSelectAll,callback:function(e){t.isSelectAll=e},expression:"isSelectAll"}},[t._v("全选")]),t._v(" "),r("el-button",{staticStyle:{width:"100px"},attrs:{size:"small"},on:{click:function(e){return t.balance()}}},[t._v(t._s(t.getIsPurchaseSettlePow?"去结算":"预订单"))]),t._v(" "),t.isQuiry?t._e():r("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary",size:"small"},on:{click:t.addCart}},[t._v("加入购物车")])],1)])},[],!1,null,"766f7d2a",null);component.options.__file="portqueryorderlist2.vue";e.default=component.exports},532:function(t,e,r){var content=r(859);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(19).default)("32039bcb",content,!0,{sourceMap:!1})},858:function(t,e,r){"use strict";var n=r(532);r.n(n).a},859:function(t,e,r){(t.exports=r(18)(!1)).push([t.i,".pageview[data-v-766f7d2a]{width:100%;height:100%}.tableview[data-v-766f7d2a]{margin-top:20px}.setterview[data-v-766f7d2a]{margin-top:50px;text-align:right}",""])}}]);