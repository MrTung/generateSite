(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{1355:function(e,t,r){"use strict";r.r(t);r(59),r(79),r(29);var n=r(3),l=(r(388),r(36),r(5)),o=r(6),c=(r(2),r(4)),d=(r(354),{data:function(){return{titleType:"refund_only",orderId:"",createTime:"",beginDate:"",endDate:"",state:"",person:"",payType:"",orderDetail:"",logisticsName:"",logisticsId:"",logisticsArr:"",queryArr:[],textarea:"",arr1:[],radio:"1",isSelectedAll:!1,cancelReason:"",cancelId:"",reasons:[{value:"不喜欢无理由退货(未拆封使用)",label:"不喜欢无理由退货(未拆封使用)"},{value:"货品质量问题/破损",label:"货品质量问题/破损"},{value:"平台错发/少发漏发",label:"平台错发/少发漏发"},{value:"商品描述与页面不符",label:"商品描述与页面不符"},{value:"其他问题与客服协商一致",label:"其他问题与客服协商一致"}],reason:"",reasons2:[{value:"快递/物流问题",label:"快递/物流问题"},{value:"货品质量问题/破损",label:"货品质量问题/破损"},{value:"退运费",label:"退运费"},{value:"平台错发/少发漏发",label:"平台错发/少发漏发"},{value:"货物破损已拒签",label:"货物破损已拒签"},{value:"其他问题与客服协商一致",label:"其他问题与客服协商一致"}],updateExcel:l.a.ParseExcelUrl,updateFile:l.a.UploadFileUrl,sizeForm:{name:"",region:"",date1:"",date2:"",cheched:"",checkList:[],delivery:!1,type:[],resource:"",desc:"",selected:!1},dialogVisible:!1,dialogImageUrl:"",imageUrlArr:[],pictureAddress:"",checkedArr:[]}},computed:{active:function(){return"propay"==this.orderDetail.orderStatus?1:"proship"==this.orderDetail.orderStatus?2:"proreceipt"==this.orderDetail.orderStatus?3:"finish"==this.orderDetail.orderStatus?4:2},payMoney:function(){return"cashondelivery"==this.orderDetail.payType||"account_period"==this.orderDetail.payType?0:this.orderDetail.paidPrice},totalCancelPrice:function(){var e=0;if(this.orderDetail.list)return"onlinepay"!=this.orderDetail.payType&&"transfer"!=this.orderDetail.payType||this.orderDetail.list.forEach(function(t){if(t.selected){var r=Number(t.cancelFee);e+=r}}),e.toFixed(2)}},beforeMount:function(){this.getOrderDetail(this.$route.query.id,this.$route.query.index)},mounted:function(){var e=this.getPower(this);this.powMap=e,this.getCancelOrderDetails()},methods:{getOrderDetail:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(t,r){var n,d,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this,e.next=3,Object(o.a)(this,l.a.QueryOrderDetailUrl,{orderId:t});case 3:(d=e.sent)&&(this.pictureAddress=d.data.list[0].pictureAddress,this.orderDetail=d.data,this.createTime=Object(c.k)(d.data.gmtCreate),this.payType=Object(c.f)(d.data.payType),this.state=Object(c.g)(d.data.orderStatus),this.orderDetail.totalPrice=this.orderDetail.totalPrice?this.orderDetail.totalPrice.toFixed(2):this.orderDetail.price.toFixed(2),h=this.$route.query.checked,h.split("-").forEach(function(e){e.length>0&&n.queryArr.push(e)}),this.orderDetail.list&&(n=this,this.orderDetail.list.forEach(function(e,t){e.selected=n.$route.query.index==t||!1,e.cancelFee=(e.realPrice*e.amount).toFixed(2),e.num=e.amount})),this.queryArr.forEach(function(e){n.orderDetail.list[e].selected=!0,n.orderDetail.list[e].disabled=!0}),1===this.orderDetail.list.length&&(this.isSelectedAll=!0),this.isSelectedAll=!0,this.orderDetail.list.forEach(function(e){e.selected||(n.isSelectedAll=!1)}));case 5:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),changeNum:function(e,t){t.selected&&(t.cancelFee=t.realPrice*t.amount),this.orderDetail.list.splice(e,1,t)},getCancelOrderDetails:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.a)(this,l.a.getCancelOrderDetails,{orderId:this.$route.query.id},"get");case 2:(t=e.sent).data&&(this.cancelId=t.data.cancelId);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),productselected:function(e,t){e.selected||(this.isSelectedAll=!1);var r=!0;this.orderDetail.list.forEach(function(e){e.selected||(r=!1)}),r&&(this.isSelectedAll=!0),this.orderDetail.list.splice(t,1,e)},selectedAllChange:function(){var e=this;this.orderDetail.list.forEach(function(t,r){t.selected=e.isSelectedAll})},open:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){var t,r,n,c,d=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.orderDetail.titleType){e.next=3;break}return this.$message.error("请选择服务状态"),e.abrupt("return");case 3:if(this.reason){e.next=6;break}return this.$message.error("请选择退款原因"),e.abrupt("return");case 6:return t=[],0,this.orderDetail.list.forEach(function(e){if(e.selected){var r={count:e.amount,productId:e.productId,cancelFee:e.cancelFee,id:e.id};t.push(r)}parseFloat(e.cancelFee)}),r={cancelType:this.orderDetail.titleType,cancelFee:this.totalCancelPrice,attachfiles:this.imageUrlArr,introduction:this.textarea,orderId:this.$route.query.id,reason:this.reason,list:t,id:this.orderDetail.list.id},n="",this.cancelId?(r.cancelId=this.cancelId,n=l.a.modifyRequest):n=l.a.cancelOrderRequest,c=JSON.stringify(r),e.next=15,Object(o.a)(this,n,c,"POST");case 15:e.sent&&this.$confirm("您的申请退款已经提交，我们会在3个工作日内联系您，请您耐心等待！",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0,center:!0}).then(function(){d.$router.push("/order/orderdetail?id="+d.$route.query.id)}).catch(function(){});case 17:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),gotoapplicationdrawback:function(e){this.$router.push({path:"/order/applicationdrawback",query:{id:e.orderId}})},choseFee:function(e,t,r){e.target.value>t.realPrice*t.amount&&(this.orderDetail.list[r].cancelFee=t.realPrice*t.amount,this.orderDetail.list.splice(r,1,t),this.$message.error("退款金额不可超过总金额")),this.orderDetail.list.splice(r,1,t)},cancelOrder:function(){var select=document.getElementById("select");this.cancelReason=select.value,this.cancelPurchaseOrder()},htmlDecodeMethod:function(e){return Object(c.n)(e)},handlePayClick:function(){this.$router.push({path:"/payfororder",name:"confirmorder-payfororder",params:{order:this.orderDetail}})},cancelPurchaseOrder:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={orderId:this.orderDetail.orderId,orderStatus:"close"},e.next=3,Object(o.a)(this,l.a.PurchaseOrderStUrl,t);case 3:e.sent&&(this.orderDetail.orderStatus="close",this.state=Object(c.g)("close"),this.$message.success("取消成功！"));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),confirmreceiptOrder:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={orderId:this.orderDetail.orderId,orderStatus:"finish"},e.next=3,Object(o.a)(this,l.a.PurchaseOrderStUrl,t);case 3:e.sent&&(this.orderDetail.orderStatus="finish",this.state=Object(c.g)("finish"),this.$message.success("操作成功！"));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),handleAvatarSuccess:function(e,t){this.imageUrlArr.push(t.response.data)},handlePreview:function(e){},handleExceed:function(e,t){this.$message.warning("当前限制选择 3 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))},handleRemove:function(e,t){var r=this;this.imageUrlArr.forEach(function(t){if(t==e.response.data){var n=r.imageUrlArr.indexOf(t);r.imageUrlArr.splice(n,1)}})},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0}}}),h=(r(782),r(20)),component=Object(h.a)(d,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-view"},[r("div",{staticClass:"all"},[r("div",{staticClass:"top"},[e._v("当前订单状态:\n      "),r("span",{attrs:{id:"order-status"}},[e._v(e._s(e.state))])]),e._v(" "),r("div",{staticClass:"img",staticStyle:{height:"100px"}},[r("div",{staticClass:"order-img"},[r("img",{attrs:{src:e.pictureAddress,alt:""}})]),e._v(" "),r("div",{staticClass:"news"},[r("p",[r("span",[e._v("订单编号：")]),e._v(" "),r("span",[e._v(e._s(e.orderDetail.orderId))])]),e._v(" "),r("p",[r("span",[e._v("下单时间：")]),e._v(" "),r("span",[e._v(e._s(e.createTime))])]),e._v(" "),r("p",[r("span",[e._v("实付金额：")]),e._v("￥"+e._s(e.payMoney)+"\n          "),r("span")])])]),e._v(" "),r("div",{staticClass:"user"},[r("el-row",{staticClass:"order-news"},[r("el-col",{attrs:{span:1}},[r("el-checkbox",{on:{change:function(t){return e.selectedAllChange()}},model:{value:e.isSelectedAll,callback:function(t){e.isSelectedAll=t},expression:"isSelectedAll"}})],1),e._v(" "),r("el-col",{attrs:{span:3}},[r("div",{staticClass:"grid-content "},[e._v("全选退款商品")])]),e._v(" "),r("el-col",{attrs:{span:3}},[r("div",{staticClass:"grid-content "},[e._v("商品信息")])]),e._v(" "),r("el-col",{attrs:{span:3}},[r("div",{staticClass:"grid-content "},[e._v("规格")])]),e._v(" "),r("el-col",{attrs:{span:3}},[r("div",{staticClass:"grid-content "},[e._v("单价(元)")])]),e._v(" "),r("el-col",{attrs:{span:3}},[r("div",{staticClass:"grid-content "},[e._v("数量")])]),e._v(" "),r("el-col",{attrs:{span:3}},[r("div",{staticClass:"grid-content "},[e._v("小计")])]),e._v(" "),r("el-col",{attrs:{span:3}},[r("div",{staticClass:"grid-content ",staticStyle:{"margin-left":"10px"}},[e._v("退款金额最多可退")])])],1)],1),e._v(" "),e._l(e.orderDetail.list,function(t,n){return r("div",{key:n,staticClass:"details"},[r("el-row",{staticClass:"shop-list-news"},[r("el-col",{attrs:{span:1}},[r("br"),r("br"),e._v(" "),r("el-checkbox",{attrs:{disabled:t.disabled||"finish"==t.status,data:n},on:{change:function(r){return e.productselected(t,n)}},model:{value:t.selected,callback:function(r){e.$set(t,"selected",r)},expression:"item.selected"}})],1),e._v(" "),r("el-col",{attrs:{span:3}},[r("div",{staticClass:"grid-content "},[r("img",{attrs:{src:t.pictureAddress,alt:"",width:"80",height:"80"}})])]),e._v(" "),r("el-col",{attrs:{span:3}},[r("div",{staticClass:"grid-content",staticStyle:{"margin-top":"30px",height:"53px",overflow:"hidden"},attrs:{align:"left"}},[e._v(e._s(t.productName))])]),e._v(" "),r("el-col",{attrs:{span:3}},[r("div",{staticClass:"grid-content "},[r("br"),r("br"),e._v(e._s(t.makerModel))])]),e._v(" "),r("el-col",{attrs:{span:3}},[r("div",{staticClass:"grid-content "},[r("br"),r("br"),e._v("￥"+e._s(t.realPrice))])]),e._v(" "),r("el-col",{staticStyle:{"margin-top":"35px"},attrs:{span:3}},["proreceipt"!=e.orderDetail.orderStatus||"finish"!=e.orderDetail.orderStatus?r("el-input-number",{attrs:{disabled:!t.selected||"proship"==e.orderDetail.orderStatus,size:"mini",min:1,max:t.num,label:"描述文字"},on:{change:function(r){return e.changeNum(n,t)}},model:{value:t.amount,callback:function(r){e.$set(t,"amount",r)},expression:"item.amount"}}):r("el-input-number",{attrs:{disabled:!0,size:"mini",min:1,max:t.num,label:"描述文字"},model:{value:t.amount,callback:function(r){e.$set(t,"amount",r)},expression:"item.amount"}})],1),e._v(" "),r("el-col",{attrs:{span:3}},[r("div",{staticClass:"grid-content "},[r("br"),r("br"),e._v(e._s((t.realPrice*t.amount).toFixed(2)))])]),e._v(" "),r("el-col",{staticStyle:{"margin-left":"10px"},attrs:{span:3}},[r("div",{staticClass:"grid-content "},[r("br"),r("br"),"onlinepay"==e.orderDetail.payType||"transfer"==e.orderDetail.payType?r("input",{directives:[{name:"model",rawName:"v-model",value:t.cancelFee,expression:"item.cancelFee"}],staticClass:"fee-input",attrs:{type:"text",disabled:!t.selected},domProps:{value:t.cancelFee},on:{change:function(r){return e.choseFee(r,t,n)},input:function(r){r.target.composing||e.$set(t,"cancelFee",r.target.value)}}}):e._e()]),e._v(" "),"cashondelivery"==e.orderDetail.payType||"account_period"==e.orderDetail.payType?r("p",{staticClass:"good_txt"},[r("span",{staticClass:"no-pay",staticStyle:{float:"right"}},[e._v("尚未付款")])]):e._e()])],1)],1)}),e._v(" "),r("div",{staticClass:"content-payment"},[r("el-form",{ref:"form",staticStyle:{"margin-top":"20px"},attrs:{model:e.sizeForm,"label-width":"110px",size:"mini"}},[r("el-form-item",{attrs:{size:"mini",label:"服务状态:"}},[r("span",{staticClass:"color-red"},[e._v("* ")]),e._v(" "),r("span",[r("el-radio",{attrs:{label:"refund_only"},model:{value:e.orderDetail.titleType,callback:function(t){e.$set(e.orderDetail,"titleType",t)},expression:"orderDetail.titleType"}},[e._v("仅退款")]),r("br"),e._v(" "),"proreceipt"===e.orderDetail.orderStatus||"finish"===e.orderDetail.orderStatus?r("el-radio",{staticStyle:{"margin-left":"10px"},attrs:{label:"sales_return"},model:{value:e.orderDetail.titleType,callback:function(t){e.$set(e.orderDetail,"titleType",t)},expression:"orderDetail.titleType"}},[e._v("退款退货")]):e._e()],1)]),e._v(" "),"refund_only"==e.orderDetail.titleType?r("el-form-item",{attrs:{size:"mini",label:"退款原因:"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[r("span",{staticClass:"color-red"},[e._v("*")]),e._v(" "),r("span",[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.reason,callback:function(t){e.reason=t},expression:"reason"}},e._l(e.reasons,function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}},[r("span",{staticStyle:{float:"left"}},[e._v(e._s(t.label))])])}),1)],1)]):e._e(),e._v(" "),r("el-form-item",{staticStyle:{"margin-left":"15px"},attrs:{size:"mini",label:"商品总金额:"}},[r("span",{staticStyle:{color:"#0d76e7"}},[e._v("￥"+e._s(e.totalCancelPrice))]),r("br"),e._v(" "),r("p",{staticStyle:{"margin-left":"-80px"}},[e._v("具体退款金额客服会与您协商确定")])]),e._v(" "),r("el-form-item",{attrs:{size:"mini",label:"退款说明:"}},[r("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入内容"},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}})],1),e._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"sales_return"==e.orderDetail.titleType,expression:"orderDetail.titleType=='sales_return'"}],staticClass:"reason",attrs:{size:"mini",label:"退款原因:"}},[r("span",{staticClass:"color-red"},[e._v("*")]),e._v(" "),r("span",[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.reason,callback:function(t){e.reason=t},expression:"reason"}},e._l(e.reasons2,function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}},[r("span",{staticStyle:{float:"left"}},[e._v(e._s(t.label))])])}),1)],1)]),e._v(" "),r("el-form-item",{attrs:{label:"上传凭证:"}},[r("el-upload",{staticStyle:{width:"1000px",position:"relative"},attrs:{action:e.updateFile,"list-type":"picture-card","on-success":e.handleAvatarSuccess,"on-preview":e.handlePictureCardPreview,limit:3,"on-exceed":e.handleExceed,"on-remove":e.handleRemove}},[r("i",{staticClass:"el-icon-plus"}),e._v(" "),r("p",{staticClass:"tip-pic"},[e._v("最多3张")])]),e._v(" "),r("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),e._v(" "),r("el-form-item",{attrs:{label:""}},[r("el-button",{staticClass:"btn",attrs:{type:"text"},on:{click:e.open}},[e._v("确定")])],1)],1)],1)],2)])},[],!1,null,"7012737b",null);component.options.__file="applicationdrawback.vue";t.default=component.exports},354:function(e,t,r){"use strict";r.d(t,"c",function(){return n}),r.d(t,"a",function(){return l}),r.d(t,"b",function(){return o});r(59),r(79);var n=function(e,t,r){if("upImg"==t){var n="image/jpeg"===r.type,l="image/png"===r.type,o=r.size/1024/1024<20;return n||l||e.$message.error("上传图片只能是 JPG/PNG 格式!"),o||e.$message.error("上传图片大小不能超过 20MB!"),(n||l)&&o}if("upExl"==t){var c=r.size/1024/1024<20,d=!1,h=r.name.split(".");return"xls"===h[1]||"xlsx"===h[1]?d=!0:(e.$message.error("上传文件只能是 excel 格式!"),d=!1),c||e.$message.error("上传文件大小不能超过 20MB!"),d&&c}if("upAll"==t){var v=r.size/1024/1024<20;return v||e.$message.error("上传文件大小不能超过 20MB!"),v}},l=function(e,t,r,n){return e.$message.error("营业执照上传失败，请重新上传！")},o=function(){var e={};return window.localStorage.getItem("ACCESS_TOKEN")&&""!=window.localStorage.getItem("ACCESS_TOKEN")&&(e={Authorization:"Bearer "+window.localStorage.getItem("ACCESS_TOKEN")}),e}},388:function(e,t,r){"use strict";var n=r(9),l=r(30),o=r(41),c=r(139),d=r(86),h=r(21),v=r(85).f,f=r(135).f,m=r(16).f,_=r(392).trim,y=n.Number,x=y,D=y.prototype,w="Number"==o(r(87)(D)),S="trim"in String.prototype,C=function(e){var t=d(e,!1);if("string"==typeof t&&t.length>2){var r,n,l,o=(t=S?t.trim():_(t,3)).charCodeAt(0);if(43===o||45===o){if(88===(r=t.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:n=2,l=49;break;case 79:case 111:n=8,l=55;break;default:return+t}for(var code,c=t.slice(2),i=0,h=c.length;i<h;i++)if((code=c.charCodeAt(i))<48||code>l)return NaN;return parseInt(c,n)}}return+t};if(!y(" 0o1")||!y("0b1")||y("+0x1")){y=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof y&&(w?h(function(){D.valueOf.call(r)}):"Number"!=o(r))?c(new x(C(t)),r,y):C(t)};for(var A,I=r(12)?v(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;I.length>k;k++)l(x,A=I[k])&&!l(y,A)&&m(y,A,f(x,A));y.prototype=D,D.constructor=y,r(22)(n,"Number",y)}},392:function(e,t,r){var n=r(15),l=r(40),o=r(21),c=r(393),d="["+c+"]",h=RegExp("^"+d+d+"*"),v=RegExp(d+d+"*$"),f=function(e,t,r){var l={},d=o(function(){return!!c[e]()||"​"!="​"[e]()}),h=l[e]=d?t(m):c[e];r&&(l[r]=h),n(n.P+n.F*d,"String",l)},m=f.trim=function(e,t){return e=String(l(e)),1&t&&(e=e.replace(h,"")),2&t&&(e=e.replace(v,"")),e};e.exports=f},393:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},498:function(e,t,r){var content=r(783);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(19).default)("055e87b6",content,!0,{sourceMap:!1})},782:function(e,t,r){"use strict";var n=r(498);r.n(n).a},783:function(e,t,r){(e.exports=r(18)(!1)).push([e.i,".page-view .all[data-v-7012737b]{width:1100px;border:0;padding-bottom:50px}.details[data-v-7012737b]{height:120px;background:#f5f5f5;border:1px solid #ececec;margin-top:20px}.top[data-v-7012737b]{font-size:14px}.order-img[data-v-7012737b]{float:left;width:100px;height:100px;margin-right:10px}.news[data-v-7012737b]{float:left;line-height:30px}.user[data-v-7012737b]{height:40px}.order-img img[data-v-7012737b]{width:100%;height:100%}.top #order-status[data-v-7012737b]{font-size:20px;color:#000;font-weight:700}.btn[data-v-7012737b]{width:266px;height:50px;background:#0d76e7;color:#fff;font-size:20px}.grid-content[data-v-7012737b]{overflow:hidden}.tip-pic[data-v-7012737b]{width:148px;color:#787878;position:absolute;bottom:-25px;margin:0 auto}.fee-input[data-v-7012737b]{text-align:center;width:92px;height:30px;background:#fff}.order-news[data-v-7012737b]{line-height:40px;margin-top:50px;width:1100px}.order-news[data-v-7012737b],.shop-list-news[data-v-7012737b]{color:#858585;background:#f5f5f5;height:40px;text-align:center}.shop-list-news[data-v-7012737b]{margin-top:15px}.content-payment[data-v-7012737b]{width:33%;height:550px}.no-pay[data-v-7012737b]{margin-right:50px}.color-red[data-v-7012737b]{color:red}",""])}}]);