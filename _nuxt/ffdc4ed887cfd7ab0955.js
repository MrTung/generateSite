(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{1251:function(t,e,r){"use strict";var n=r(600);r.n(n).a},1252:function(t,e,r){(t.exports=r(18)(!1)).push([t.i,".text-right{text-align:right}.text-center{text-align:center}.tm-brand-main .tm-area{padding-top:30px}.tm-brand-main{padding-top:15px;padding-bottom:60px}.tm-brand-head{font-size:12px;padding:40px;border:1px solid #eee}.tm-brand-head-left{width:210px}.tm-brand-head-right{width:900px;color:#787878}.tm-brand-seeAll{font-size:12px;color:#000}.tm-brand-head2{background:#f5f5f5;color:#000}.tm-brand-head2 .tm-title1{display:inline-block;line-height:40px;padding:0 30px;font-size:16px;text-align:center;vertical-align:middle}.tm-head2-a-group{display:inline-block;width:1000px;font-size:14px;overflow-y:auto;white-space:nowrap;vertical-align:middle}.tm-brand-head2-a{display:inline-block;line-height:40px;padding:0 20px;border-top:5px solid transparent;border-bottom:5px solid transparent;text-align:center}.tm-brand-head2-a.active,.tm-brand-head2-a:hover{border-bottom:5px solid #1b6dc5}.tm-brand-head2-more{display:block;float:right;font-size:16px;line-height:60px;padding-right:15px}.clearfix{display:block}.prd_list_ul{margin-left:-8px;margin-right:-8px;padding-top:12px}.prd_list_li{padding-left:8px;padding-bottom:18px;width:234px;height:auto;line-height:1.5;float:left;border:none}.tm-prdlist-item{padding:0 0 10px;border:1px solid #ececec;position:relative}.tm-prdlist-item:hover{border:1px solid #1b6dc5}.prd_img div:hover{-webkit-transform:translateX(-6px);transform:translateX(-6px)}.prd_name{font-size:12px;color:#787878;margin-bottom:5px;margin-top:7px;padding-left:5px;padding-right:5px;height:45px;line-height:1.25;overflow:hidden}.prd_price,.prd_price a{color:#1b6dc5}.prd_price a{margin-bottom:5px}.price_big{font-size:20px}.prd_name a:hover,.prd_price a:hover,.prd_type a:hover{color:#1b6dc5}.tm-prd-num{float:left;position:relative;width:55px;height:33px;border:1px solid #ccc}.prd_buy{height:35px;padding-top:8px;padding-right:10px}.tm-prd-num-input{outline:0;border:none;margin:0;box-shadow:none;color:inherit;text-align:center;width:40px;height:33px;font-size:14px;line-height:20px;padding:6px 0 7px;display:block;box-sizing:border-box}.tm-prd-num-btn{position:absolute;right:0;width:15px;height:16px;border-left:1px solid #ccc}.tm-prd-num-btn.min{cursor:not-allowed;background-image:url(/static/images2/prd_2_gray.png);background-size:100%}.tm-prd-num-btn.max{cursor:not-allowed;background-image:url(/static/images2/prd_1_gray.png);background-size:100%}.tm-prd-num-plus{background-image:url(/static/images2/prd_1.png);top:0;border-bottom:1px solid #ccc}.tm-prd-num-minus,.tm-prd-num-plus{background-repeat:no-repeat;background-size:100%}.tm-prd-num-minus{background-image:url(/static/images2/prd_2.png);top:17px}.prd_buy .icon-cart22{font-size:30px;margin-left:7px;line-height:34px;vertical-align:middle}.prd_buy .icon-cart22.tm-active{color:#1b6dc5;background:none}.prd_buy .icon-cart22.inactive{color:#787878}.tm-price-row{padding-left:5px;padding-right:5px}.tm-prds-area{position:relative}.el-carousel__arrow.disabled:hover{background:rgba(31,45,61,.11)}div.prodpath{font-size:12px;height:25px;line-height:25px;margin-bottom:10px;text-align:left}",""])},1308:function(t,e,r){"use strict";r.r(e);r(29);var n=r(3),o=(r(36),r(82),r(128)),d=r(129),menu=(r(609),r(349)),c=r(342),l=r(6),h=r(5),m=r(4),f=r(2),v=r(7),x=r.n(v),_=r(371),y={asyncData:function(t){var e=h.a.getSeoConfig+"?pageType="+encodeURIComponent("品牌页")+"&extParam="+t.route.params.id,r=t.store.state.accesstoken?"Bearer "+t.store.state.accesstoken:"";return Promise.all([x.a.get(h.a.getPrdsByBrandUrl,{params:{brandId:t.route.params.id},headers:{Authorization:r}}),x.a.get(e)]).then(function(t){for(var e=t[0].data.data,r=e.brand,n=e.categoryList?e.categoryList:[],o=n.length,d=0;d<o;d++){var c=o-(d+1);if(n[c].children&&0!==n[c].children.length){for(var l=n[c].children,h=l.length,m=0;m<h;m++){var f=h-(m+1);l[f].productList&&0!==l[f].productList.length||l.splice(f,1)}0===l.length&&n.splice(c,1)}else n.splice(c,1)}for(var v=new Array(n.length),x=0;x<v.length;x++)v[x]=0;n.forEach(function(t){t.children.forEach(function(t,e){t.selected=0===e})}),n.forEach(function(t){t.children.forEach(function(t){t.productList.forEach(function(t){t.buyNum=1})})}),n.forEach(function(t){t.children.forEach(function(t){t.slidePrevDisabled=!0,t.productList.length>10?(t.showGroupIndex=1,t.slideNextDisabled=!1):(t.showGroupIndex=null,t.slideNextDisabled=!0),t.productList.forEach(function(t,e){t.hideBySlider=e>=10})})});var _={};return t[1]&&t[1].data&&"0000"==t[1].data.code&&t[1].data.data&&(_=t[1].data.data),{brand:r,prdsTree:n,activeSubcategoryIndexAry:v,seoInfo:_}})},head:function(){return{title:Object(m.n)(this.seoInfo.pageTitle),meta:[{name:"keywords",content:this.seoInfo.keyWords,hid:"keywords"},{name:"description",content:this.seoInfo.description,hid:"description"}]}},data:function(){return{introDialogVisible:!1}},components:{"v-top":o.a,"v-search":d.a,"v-menu":menu.a,"v-footer":c.a,"v-otherRight":_.a},beforeMount:function(){},mounted:function(){var t={name:this.seoInfo.keyWords};AnalysysAgent.track("main200102",t)},computed:{brandId:function(){return this.$route.params.id}},methods:{htmlDecodeMethod:function(t){return Object(m.n)(t)},decideSlideBtnDisabled:function(t,e){if(e||(e="next"),"prve"==e)return!t.showGroupIndex||1===t.showGroupIndex;if("next"==e){if(!t.showGroupIndex)return!0;var r=t.productList.length;return t.showGroupIndex===Math.ceil(r/10)}},slidePrev:function(t){if(!t.slidePrevDisabled){t.showGroupIndex--,t.productList.forEach(function(t){t.hideBySlider=!0});for(var e=0;e<t.productList.length;e++)e>=10*(t.showGroupIndex-1)&&e<10*t.showGroupIndex&&(t.productList[e].hideBySlider=!1);1===t.showGroupIndex&&(t.slidePrevDisabled=!0),t.slideNextDisabled=!1}},slideNext:function(t){if(!t.slideNextDisabled){t.showGroupIndex++,t.productList.forEach(function(t){t.hideBySlider=!0});for(var e=0;e<t.productList.length;e++)e>=10*(t.showGroupIndex-1)&&e<10*t.showGroupIndex&&(t.productList[e].hideBySlider=!1);var r=t.productList.length;t.showGroupIndex===Math.ceil(r/10)&&(t.slideNextDisabled=!0),t.slidePrevDisabled=!1}},showMore:function(t){for(var e=t.id,r=0;r<t.children.length;r++)t.children[r].selected&&(e=t.children[r].id);this.$router.push("/category/"+e+"?brandId="+this.brandId)},addCart:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(e,r){var n,o,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={cart:[{productId:e,pcount:parseInt(r)}]},o=JSON.stringify(n),t.next=4,Object(l.a)(this,h.a.AddCart,o);case 4:t.sent&&(this.$message.success("购物车加入成功"),this.$store.commit(f.MutationTypes.ADD_CART_COUNT,n.cart[0].pcount),d={count:n.cart[0].pcount,productId:n.cart[0].productId},AnalysysAgent.track("main200401",d));case 6:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),changeCategory:function(t,e){this.prdsTree[e].children.forEach(function(t){t.selected=!1}),t.selected=!0},getShowPrice:function(t){return t.realPrice&&t.realPrice>=0?t.realPrice:t.price},isMax:function(t){var e=9999;return t.stock&&t.stock>0&&(e=t.stock),t.buyNum>=e},buyNumChange:function(t,e){var r=9999;e.stock&&e.stock>0&&(r=e.stock),e.buyNum=parseInt(e.buyNum),isNaN(e.buyNum)?e.buyNum=1:e.buyNum>=r?e.buyNum=r:e.buyNum<=0&&(e.buyNum=1)},addPrd:function(t){var e=9999;t.stock&&t.stock>0&&(e=t.stock),t.buyNum<e&&t.buyNum++},deductPrd:function(t){t.buyNum>1&&t.buyNum--}}},w=(r(1251),r(20)),component=Object(w.a)(y,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tm-brand-root"},[r("v-top"),t._v(" "),r("v-search"),t._v(" "),r("v-menu"),t._v(" "),r("v-otherRight"),t._v(" "),r("div",{staticClass:"tm-brand-main tm-brandlist-main"},[r("div",{staticClass:"tm-container"},[r("div",{staticClass:"tm-row"},[r("div",{staticClass:"f-left"},[r("div",{staticClass:"prodpath"},[r("span",[r("router-link",{attrs:{to:"/"}},[t._v("首页")])],1),t._v("\n             >\n            "),r("span",[r("router-link",{attrs:{to:"/brand"}},[t._v("品牌")])],1),t._v("\n             >\n            "),r("span",[t._v(t._s(t.brand.name))])])]),t._v(" "),r("div",{staticClass:"f-right"},[r("router-link",{staticClass:"tm-brand-seeAll",attrs:{to:"/search?keyword="+t.brand.name}},[t._v("查看该品牌全部商品 >")])],1)]),t._v(" "),r("div",{staticClass:"tm-area"},[r("div",{staticClass:"tm-row tm-brand-head"},[r("div",{staticClass:"f-left tm-brand-head-left"},[t.brand.introduction?r("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.introDialogVisible=!0}}},[r("img",{attrs:{src:t.brand.logo,width:"196",height:"116"}})]):r("img",{attrs:{src:t.brand.logo,width:"196",height:"116"}}),t._v(" "),r("el-dialog",{attrs:{title:"品牌介绍",visible:t.introDialogVisible,width:"1000px"},on:{"update:visible":function(e){t.introDialogVisible=e}}},[r("div",{domProps:{innerHTML:t._s(t.brand.introduction)}}),t._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(e){t.introDialogVisible=!1}}},[t._v("关闭")])],1)])],1),t._v(" "),r("div",{staticClass:"f-left tm-brand-head-right"},[r("div",{domProps:{innerHTML:t._s(t.brand.brief)}})])])]),t._v(" "),t._l(t.prdsTree,function(e,n){return r("div",{key:n,staticClass:"tm-brand-group"},[r("div",{staticClass:"tm-area"},[r("div",{staticClass:"tm-clearfix tm-brand-head2"},[r("span",{staticClass:"tm-title1",attrs:{"data-id":e.id}},[t._v(t._s(t.htmlDecodeMethod(e.name)))]),t._v(" "),r("div",{staticClass:"tm-head2-a-group"},t._l(e.children,function(e,o){return r("a",{key:o,staticClass:"tm-brand-head2-a",class:{active:e.selected},on:{click:function(r){return t.changeCategory(e,n)}}},[t._v("\n                "+t._s(t.htmlDecodeMethod(e.name))+"\n              ")])}),0)])]),t._v(" "),t._l(e.children,function(n,o){return n.selected?r("div",{key:o,staticClass:"tm-area tm-prds-area"},[n.showGroupIndex?r("button",{staticClass:"el-carousel__arrow el-carousel__arrow--left",class:{disabled:n.slidePrevDisabled},attrs:{type:"button"},on:{click:function(e){return t.slidePrev(n)}}},[r("i",{staticClass:"el-icon-arrow-left"})]):t._e(),t._v(" "),n.showGroupIndex?r("button",{staticClass:"el-carousel__arrow el-carousel__arrow--right",class:{disabled:n.slideNextDisabled},attrs:{type:"button"},on:{click:function(e){return t.slideNext(n)}}},[r("i",{staticClass:"el-icon-arrow-right"})]):t._e(),t._v(" "),r("ul",{staticClass:"tm-clearfix prd_list_ul"},t._l(n.productList,function(n,o){return r("li",{directives:[{name:"show",rawName:"v-show",value:!n.hideBySlider,expression:"!prdItem.hideBySlider"}],key:o,staticClass:"prd_list_li"},[r("div",{staticClass:"tm-prdlist-item"},[r("div",{staticStyle:{"text-align":"center","padding-top":"28px","padding-bottom":"28px"}},[r("router-link",{attrs:{to:"/product/"+n.unicode}},[r("img",{attrs:{src:n.image,width:"170",height:"170"}})])],1),t._v(" "),r("div",{staticClass:"prd_name"},[r("router-link",{attrs:{to:"/product/"+n.unicode}},[t._v(t._s(t.htmlDecodeMethod(n.name)))])],1),t._v(" "),r("div",{staticClass:"tm-row tm-price-row"},[r("div",{staticClass:"f-left prd_price"},[r("p",{staticStyle:{"padding-top":"10px"},attrs:{title:"价格说明：此列价格默认显示商品的土猫价，若已经签署协议价且有权限查看，则显示协议价"}},[t._v("\n                      ￥\n                      "),r("span",{staticClass:"price_big"},[t._v(t._s(t.getShowPrice(n).toFixed(2)))])])]),t._v(" "),r("div",{staticClass:"f-right prd_buy"},[!e.stock||e.stock>0?r("div",{staticClass:"tm-prd-num "},[r("input",{directives:[{name:"model",rawName:"v-model",value:n.buyNum,expression:"prdItem.buyNum"}],staticClass:"tm-prd-num-input",attrs:{type:"text",disabled:0==n.stock},domProps:{value:n.buyNum},on:{input:[function(e){e.target.composing||t.$set(n,"buyNum",e.target.value)},function(e){return t.buyNumChange(n.buyNum,n)}]}}),t._v(" "),r("a",{staticClass:"tm-prd-num-btn tm-prd-num-plus",class:{max:t.isMax(n)},on:{click:function(e){return t.addPrd(n)}}}),t._v(" "),r("a",{staticClass:"tm-prd-num-btn tm-prd-num-minus",class:{min:1==n.buyNum},on:{click:function(e){return t.deductPrd(n)}}})]):t._e(),t._v(" "),0==n.stock?r("span",{staticClass:"icon-cart22 inactive",attrs:{title:"暂时缺货"}}):r("a",{staticClass:"icon-cart22 tm-active",attrs:{href:"javascript:;",title:"加入购物车"},on:{click:function(e){return t.addCart(n.unicode,n.buyNum)}}})])])])])}),0)]):t._e()})],2)})],2)]),t._v(" "),r("v-footer")],1)},[],!1,null,null,null);component.options.__file="index.vue";e.default=component.exports},600:function(t,e,r){var content=r(1252);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(19).default)("db6108e0",content,!0,{sourceMap:!1})}}]);