(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{1245:function(e,t,r){"use strict";var o=r(597);r.n(o).a},1246:function(e,t,r){(e.exports=r(18)(!1)).push([e.i,".content-view[data-v-78d3ecb0]{margin-bottom:60px}.regist-head-img[data-v-78d3ecb0]{text-indent:-9999px;overflow:hidden;height:136px;background:url(/static/images/zhuce_head.png) top no-repeat}.steps-inline-block[data-v-78d3ecb0]{width:800px;margin:auto}.steps-region[data-v-78d3ecb0]{margin-top:44px;margin-bottom:44px}.ruleForm[data-v-78d3ecb0]{width:474px;margin:auto}.tm-passowrd-out[data-v-78d3ecb0]{position:relative}.tm-passowrd-out .icon-eye[data-v-78d3ecb0],.tm-passowrd-out .icon-eyeclosed[data-v-78d3ecb0]{position:absolute;top:10px;right:10px;font-size:20px;line-height:1;display:block;vertical-align:middle;cursor:pointer;color:#787878}.tm-ok-info .tm-p1[data-v-78d3ecb0]{font-size:40px;padding-top:20px}.tm-ok-info .tm-p1[data-v-78d3ecb0],.tm-ok-info .tm-p2[data-v-78d3ecb0]{line-height:1.3;color:#787878;text-align:center}.tm-ok-info .tm-p2[data-v-78d3ecb0]{margin-top:20px;font-size:20px}.tm-ok-info .tm-p3[data-v-78d3ecb0]{text-align:center;margin-top:10px}",""])},1283:function(e,t,r){"use strict";r.r(t);r(60),r(29);var o=r(3),n=r(451),l=r(342),c=r(5),m=r(6),d=(r(369),r(83)),h=r(2),f=r(374),v=r(354),y={components:{"v-header-regist":n.a,"v-footer":l.a,"v-cityPicker":f.a},data:function(){return{companyindyList:[{companyindy:"manufacture",label:"工业制造业"},{companyindy:"custom_manufacturing",label:"消费制造业"},{companyindy:"materials",label:"原材料业"},{companyindy:"service",label:"服务业"},{companyindy:"energy",label:"能源业"},{companyindy:"properties_construction",label:"公共事业"},{companyindy:"trade",label:"贸易业"},{companyindy:"university",label:"高校"},{companyindy:"research_institutions",label:"科研院所"},{companyindy:"other_type",label:"其他"}],updateFile:c.a.UploadFileUrl,updateType:"营业执照",companyArea:[],ruleForm:{realName:"",companyName:"",detailAddress:"",procurementType:"",businessLicence:"",referrer:"",provinceId:"",cityId:"",districtId:"",addressId:"",companyAttribute:""},errors:{realName:"",companyName:"",detailAddress:"",procurementType:"",businessLicence:"",addressId:""},rules:{realName:[{required:!0,message:"请输入您的真实姓名",trigger:"blur"}],companyName:[{required:!0,message:"请输入公司名称",trigger:"blur"}],addressId:[{required:!0,message:"请选择公司所在地",trigger:"blur"}],companyAttribute:[]}}},methods:{resetForm:function(e){this.$refs[e].resetFields()},openError:function(text){this.$message.error(text)},handleAvatarSuccess:function(e,t){this.ruleForm.imageUrl=URL.createObjectURL(t.raw)},beforeAvatarUpload:function(e){return Object(v.c)(this,"upImg",e)},purchaseChange:function(e){this.updateType="enterprise_procurement"==e?"营业执照":"店面门头"},onSelectProvince:function(){},UpdateBusinessLicenceImg:function(e,t,r){null!=r&&r.length>=2&&r.splice(0,1),this.ruleForm.businessLicence=t.response.data},businessLicenceRemove:function(e,t){},updateProgress:function(e,t,r){},businessLicenceError:function(e,t,r){this.openError("营业执照上传失败，请重新上传！")},onResultChange:function(e){this.ruleForm.provinceId=e[0],this.ruleForm.cityId=e[1],this.ruleForm.districtId=e[2],this.ruleForm.provinceId&&this.ruleForm.cityId&&this.ruleForm.districtId?this.ruleForm.addressId=e:this.ruleForm.addressId=[]},isCheckFormName2:function(e){var t=!0;return this.$refs[e].validate(function(e){t=!!e}),t},verfiyStepThree:function(){var e=this;return new Promise(function(t,r){return e.isCheckFormName2("ruleForm2")?t(!0):t(!1)})},submitForm:function(){var e=this;this.verfiyStepThree().then(function(t){t&&e.registHandler()})},openRegist:function(){var e=this;this.$confirm("<strong>您好！欢迎注册土猫企业购平台：<br/> 专属客服会尽快联系您；<br/> 审核确认后，可正常登录，请耐心等待。</strong>","注册提示",{dangerouslyUseHTMLString:!0,confirmButtonText:"首页逛逛",showCancelButton:!1,showClose:!1,closeOnPressEscape:!1,closeOnClickModal:!1,type:"success",center:!0}).then(function(){e.$router.push("/")})},registHandler:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(){var t,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={mobile:this.$store.state.registInfo.mobile,userName:this.$store.state.registInfo.userName,password:this.$store.state.registInfo.password,realName:this.ruleForm.realName,companyName:this.ruleForm.companyName,provinceId:this.ruleForm.provinceId,cityId:this.ruleForm.cityId,districtId:this.ruleForm.districtId,detailAddress:this.ruleForm.detailAddress,procurementType:this.ruleForm.procurementType,businessLicense:this.ruleForm.businessLicence,referrer:this.ruleForm.referrer,companyAttribute:this.ruleForm.companyAttribute,source:"PC"},window.localStorage.getItem("channelSource")&&(t.channelSource=window.localStorage.getItem("channelSource")),e.next=4,Object(m.a)(this,c.a.Registurl,t);case 4:e.sent&&(r={next:"3",realName:this.ruleForm.realName,companyName:this.ruleForm.companyName,provinceId:this.ruleForm.provinceId,cityId:this.ruleForm.cityId,districtId:this.ruleForm.districtId,detailAddress:this.ruleForm.detailAddress,procurementType:this.ruleForm.procurementType,companyAttribute:this.ruleForm.companyAttribute},AnalysysAgent.track("main200701",r),(o=Object.assign({},this.$store.state.registInfo)).third_ok=!0,this.$store.commit(h.MutationTypes.REGIST_INFO,o),this.$router.push("/regist/step4"));case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},computed:{getUploadHeader:function(){return Object(v.b)(this)}},mounted:function(){this.$store.state.registInfo.first_ok?this.$store.state.registInfo.second_ok||this.$router.push("/regist/step2"):this.$router.push("/regist"),Object(d.a)("regist")}},_=(r(1245),r(20)),component=Object(_.a)(y,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"regist-page"},[r("v-header-regist",{attrs:{showLogin:!1}}),e._v(" "),r("div",{staticClass:"content-view"},[r("div",{staticClass:"tm-container"},[r("div",{staticClass:"regist-head-img"},[e._v("\n        企业采购账户注册。 开具增票，企业专项价，批量下单，专属库存，专属经理，省心省力\n      ")]),e._v(" "),r("div",{staticClass:"steps-region"},[r("div",{staticClass:"steps-inline-block"},[r("el-steps",{attrs:{space:200,"align-center":"",active:2}},[r("el-step",{attrs:{title:"验证手机号"}}),e._v(" "),r("el-step",{attrs:{title:"填写账号信息"}}),e._v(" "),r("el-step",{attrs:{title:"填写公司信息"}}),e._v(" "),r("el-step",{attrs:{title:"注册成功"}})],1)],1)]),e._v(" "),r("div",{staticClass:"ruleForm-out"},[r("el-form",{ref:"ruleForm2",staticClass:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"公司名称",prop:"companyName"}},[r("customInput",{attrs:{inputType:"filterstr",type:"text",placeholder:"请输入营业执照上的公司名称"},model:{value:e.ruleForm.companyName,callback:function(t){e.$set(e.ruleForm,"companyName",t)},expression:"ruleForm.companyName"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"addressId",label:"公司所在地","label-width":"100px",error:e.errors.addressId}},[r("v-cityPicker",{ref:"cityPicker",attrs:{value:e.companyArea,pickerWidth:"121px"},on:{"on-change":e.onResultChange}})],1),e._v(" "),r("el-form-item",{attrs:{label:"详细地址",prop:"detailAddress"}},[r("customInput",{attrs:{inputType:"filterstr",type:"textarea",placeholder:"请输入详细地址"},model:{value:e.ruleForm.detailAddress,callback:function(t){e.$set(e.ruleForm,"detailAddress",t)},expression:"ruleForm.detailAddress"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"联系人姓名",prop:"realName"}},[r("customInput",{attrs:{inputType:"filterstr",maxlength:"8",type:"text",placeholder:"请输入真实姓名"},model:{value:e.ruleForm.realName,callback:function(t){e.$set(e.ruleForm,"realName",t)},expression:"ruleForm.realName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"公司行业",prop:"companyAttribute"}},[r("el-select",{staticStyle:{width:"350px"},attrs:{placeholder:"请选择"},model:{value:e.ruleForm.companyAttribute,callback:function(t){e.$set(e.ruleForm,"companyAttribute",t)},expression:"ruleForm.companyAttribute"}},e._l(e.companyindyList,function(e){return r("el-option",{key:e.companyindy,attrs:{label:e.label,value:e.companyindy}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"采购类型",prop:"procurementType"}},[r("el-radio-group",{staticStyle:{textalign:"left"},on:{change:e.purchaseChange},model:{value:e.ruleForm.procurementType,callback:function(t){e.$set(e.ruleForm,"procurementType",t)},expression:"ruleForm.procurementType"}},[r("el-radio",{staticClass:"regist_form_radio",attrs:{label:"enterprise_procurement"}},[e._v("企业采购")]),e._v(" "),r("el-radio",{staticClass:"regist_form_radio",attrs:{label:"hardware_store"}},[e._v("个人店主")]),e._v(" "),r("el-radio",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"regist_form_radio",attrs:{label:"decoration_worker"}},[e._v("装修工人")]),e._v(" "),r("el-radio",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"regist_form_radio",attrs:{label:"home_use"}},[e._v("自驾自用")]),e._v(" "),r("el-radio",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"regist_form_radio",attrs:{label:"other_type"}},[e._v("其他")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:e.updateType,prop:"businessLicence"}},[r("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{headers:e.getUploadHeader,"show-file-list":!0,beforeUpload:e.beforeAvatarUpload,"on-progress":e.updateProgress,"on-success":e.UpdateBusinessLicenceImg,"on-remove":e.businessLicenceRemove,"on-error":e.businessLicenceError,drag:"",action:e.updateFile,multiple:""}},[r("i",{staticClass:"el-icon-upload"}),e._v(" "),r("div",{staticClass:"el-upload__text"},[e._v("将图片拖到此处，或\n                "),r("em",[e._v("点击上传")])])])],1),e._v(" "),r("el-form-item",{attrs:{label:"推荐人"}},[r("customInput",{attrs:{inputType:"filterstr",type:"text",maxlength:"8",placeholder:"请输入推荐人姓名"},model:{value:e.ruleForm.referrer,callback:function(t){e.$set(e.ruleForm,"referrer",t)},expression:"ruleForm.referrer"}})],1),e._v(" "),r("el-form-item",[r("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("注册")])],1)],1)],1)])]),e._v(" "),r("v-footer",{staticClass:"foot",attrs:{isSimple:!0}})],1)},[],!1,null,"78d3ecb0",null);component.options.__file="step3.vue";t.default=component.exports},354:function(e,t,r){"use strict";r.d(t,"c",function(){return o}),r.d(t,"a",function(){return n}),r.d(t,"b",function(){return l});r(59),r(79);var o=function(e,t,r){if("upImg"==t){var o="image/jpeg"===r.type,n="image/png"===r.type,l=r.size/1024/1024<20;return o||n||e.$message.error("上传图片只能是 JPG/PNG 格式!"),l||e.$message.error("上传图片大小不能超过 20MB!"),(o||n)&&l}if("upExl"==t){var c=r.size/1024/1024<20,m=!1,d=r.name.split(".");return"xls"===d[1]||"xlsx"===d[1]?m=!0:(e.$message.error("上传文件只能是 excel 格式!"),m=!1),c||e.$message.error("上传文件大小不能超过 20MB!"),m&&c}if("upAll"==t){var h=r.size/1024/1024<20;return h||e.$message.error("上传文件大小不能超过 20MB!"),h}},n=function(e,t,r,o){return e.$message.error("营业执照上传失败，请重新上传！")},l=function(){var e={};return window.localStorage.getItem("ACCESS_TOKEN")&&""!=window.localStorage.getItem("ACCESS_TOKEN")&&(e={Authorization:"Bearer "+window.localStorage.getItem("ACCESS_TOKEN")}),e}},597:function(e,t,r){var content=r(1246);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(19).default)("a68f9ec6",content,!0,{sourceMap:!1})}}]);