(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{1357:function(t,e,r){"use strict";r.r(e);r(132),r(133),r(29);var n=r(3),c=(r(36),r(5)),o=r(6),l=r(4),d=r(2),v=r(78),h={asyncData:function(t){var e="",r="",n="";if(t.query.params){var c=JSON.parse(t.query.params);r=c.gmtCreate,n=c.orderId,e=c.companyName}return{quirycompany:e,quiryCrateTime:r,quiryOrder:n}},data:function(){return{quiryCrateTime:"",quiryOrder:"",quirycount:"",quiryState:"",quirycompany:"",selectGood:"",tableData:[]}},components:{},computed:{getIsPurchaseSettlePow:function(){return!!this.getPower(this).isPurchaseSettlePow}},mounted:function(){var t=JSON.parse(this.$route.query.params);this.quiryCrateTime=t.gmtCreate,this.quiryOrder=t.orderId,this.quirycompany=t.companyName,this.queryPurchaseList(t.orderId)},methods:{balance:function(){if(this.isCheck()){var t=[];this.tableData.forEach(function(e){e.cartId=e.orderId,e.colour=e.specification,e.imageUrl=e.pictureAddress,e.name=e.productName,e.num=e.amount,e.price=e.unitPrice,e.sum=e.unitPrice*e.amount,t.push(e)}),this.getIsPurchaseSettlePow?(this.$store.commit(d.MutationTypes.RECORD_ORDER_PRODUCTLIST,t),this.$router.push("/confirmorder")):Object(v.g)(this,t)}else this.$message.error("待提交的商品，其数量不能为空!")},isCheck:function(){var t=!0;return this.tableData.forEach(function(e){e.amount&&0!==parseInt(e.amount)||(t=!1)}),t},queryPurchaseList:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(e){var r,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={orderId:e},t.next=3,Object(o.a)(this,c.a.QueryPurchaseOrderUrl,r);case 3:(n=t.sent)&&(this.quirycount=n.data.list.length,this.quiryState=Object(l.g)(n.data.orderStatus),n.data.list&&(n.data.list.forEach(function(t,e){t.num=e+1,t.unitPrice=t.realPrice&&-1!=t.realPrice?t.realPrice.toFixed(2):t.unitPrice.toFixed(2),t.totalPrice=t.totalPrice.toFixed(2),t.productName=Object(l.n)(t.productName)}),this.tableData=n.data.list));case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),querySearchAsync:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(e,r){var n,l,d,v,h,f,m,i,_;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e&&e.length>1)){t.next=31;break}return n={query:e},t.next=4,Object(o.a)(this,c.a.QuerySelectListUrl,n,"GET");case 4:if(!(l=t.sent)){t.next=31;break}if(!(l.data&&l.data.length>0)){t.next=29;break}for(d=!0,v=!1,h=void 0,t.prev=10,f=l.data[Symbol.iterator]();!(d=(m=f.next()).done);d=!0)(i=m.value).value=i.productName;t.next=18;break;case 14:t.prev=14,t.t0=t.catch(10),v=!0,h=t.t0;case 18:t.prev=18,t.prev=19,d||null==f.return||f.return();case 21:if(t.prev=21,!v){t.next=24;break}throw h;case 24:return t.finish(21);case 25:return t.finish(18);case 26:return t.abrupt("return",r(l.data));case 29:return _=[{value:"暂无数据"}],t.abrupt("return",r(_));case 31:case"end":return t.stop()}},t,this,[[10,14,18,26],[19,,21,25]])}));return function(e,r){return t.apply(this,arguments)}}(),handleSelect:function(t){if(this.tableData){var e=this.tableData,r=!0;e.forEach(function(e){t.productId===e.productId&&(r=!1)}),r?(t.unitPrice=t.realPrice&&-1!=t.realPrice?t.realPrice:t.unitPrice,t.num=this.tableData.length+1,t.productType=t.productType?t.productType:"-",e.push(t),this.tableData=e,this.selectGood=""):this.$message.error("商品已存在")}},inputChange:function(t){var e=this.tableData[t].amount;this.tableData[t].amount=e?e<0?0:this.tableData[t].amount:0,this.tableData[t].amount=parseInt(this.tableData[t].amount),this.tableData[t].totalPrice=this.tableData[t].unitPrice*this.tableData[t].amount,this.tableData[t].totalPrice=this.tableData[t].totalPrice.toFixed(2)},deleteTable:function(t){this.tableData.splice(t,1)},htmlDecodeMethod:function(t){return Object(l.n)(t)}}},f=(r(784),r(20)),component=Object(f.a)(h,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pageview"},[t._m(0),t._v(" "),n("div",[n("div",{staticStyle:{"margin-top":"15px","font-size":"16px",color:"#333333"}},[n("span",{staticStyle:{margin:"0 15px"}},[t._v("采购时间："+t._s(t.quiryCrateTime))]),t._v(" "),n("span",[t._v("采购编号："+t._s(t.quiryOrder))]),t._v(" "),n("span",{staticStyle:{margin:"0 15px"}},[t._v("商品个数："+t._s(t.quirycount))]),t._v(" "),n("span",[t._v("状态："+t._s(t.quiryState))]),t._v(" "),n("span",{staticStyle:{"margin-left":"15px"}},[t._v("分公司名称："+t._s(t.quirycompany))])])]),t._v(" "),n("div",{staticClass:"tableview"},[n("el-row",{staticClass:"buylist"},[n("el-col",{attrs:{span:1}},[n("div",{staticClass:"grid-content "},[t._v("序号")])]),t._v(" "),n("el-col",{attrs:{span:2}},[n("div",{staticClass:"grid-content "},[t._v("缩略图")])]),t._v(" "),n("el-col",{attrs:{span:2}},[n("div",{staticClass:"grid-content "},[t._v("土猫编号")])]),t._v(" "),n("el-col",{attrs:{span:2}},[n("div",{staticClass:"grid-content "},[t._v("品牌")])]),t._v(" "),n("el-col",{attrs:{span:3}},[n("div",{staticClass:"grid-content "},[t._v("商品类型")])]),t._v(" "),n("el-col",{attrs:{span:6}},[n("div",{staticClass:"grid-content "},[t._v("商品名称")])]),t._v(" "),n("el-col",{attrs:{span:2}},[n("div",{staticClass:"grid-content "},[t._v("单价(元)")])]),t._v(" "),n("el-col",{attrs:{span:2}},[n("div",{staticClass:"grid-content "},[t._v("数量")])]),t._v(" "),n("el-col",{attrs:{span:2}},[n("div",{staticClass:"grid-content "},[t._v("小计")])]),t._v(" "),n("el-col",{attrs:{span:2}},[n("div",{staticClass:"grid-content "},[t._v("操作")])])],1),t._v(" "),t._l(t.tableData,function(e,c){return n("el-row",{key:c,staticClass:"newslist",style:((c+1)%2==0?"background-color: #FBFBFB;":"")+(c+1===t.tableData.length?"border-bottom: 1px solid #f1f1f1;":"")},[n("el-col",{attrs:{span:1}},[n("div",{staticClass:"grid-content num border"},[t._v(t._s(e.num))])]),t._v(" "),n("el-col",{attrs:{span:2}},[n("div",{staticClass:"grid-content pictureAddress border"},[n("img",{attrs:{width:"40",height:"40",src:e.pictureAddress}})])]),t._v(" "),n("el-col",{attrs:{span:2}},[n("div",{staticClass:"grid-content productId border"},[t._v(t._s(e.productId))])]),t._v(" "),n("el-col",{attrs:{span:2}},[n("div",{staticClass:"grid-content brand border"},[t._v(t._s(e.brand))])]),t._v(" "),n("el-col",{attrs:{span:3}},[n("div",{staticClass:"grid-content productType border"},[t._v(t._s(e.productType))])]),t._v(" "),n("el-col",{staticClass:"productName",attrs:{span:6}},[n("div",{staticClass:"grid-content gv_line_sty border"},[t._v(t._s(e.productName))])]),t._v(" "),n("el-col",{attrs:{span:2}},[n("div",{staticClass:"grid-content border"},[t._v(t._s(e.unitPrice))])]),t._v(" "),n("el-col",{attrs:{span:2}},[n("div",{staticClass:"grid-content border"},[n("el-input",{staticStyle:{width:"75px","text-align":"center"},attrs:{align:"center",size:"small"},on:{change:function(e){return t.inputChange(c)}},model:{value:e.amount,callback:function(r){t.$set(e,"amount",r)},expression:"item.amount"}})],1)]),t._v(" "),n("el-col",{attrs:{span:2}},[n("div",{staticClass:"grid-content border"},[t._v(t._s(e.totalPrice))])]),t._v(" "),n("el-col",{attrs:{span:2}},[n("img",{attrs:{width:"20",height:"20",src:r(380)},on:{click:function(e){return t.deleteTable(c)}}})])],1)})],2),t._v(" "),n("div",{staticClass:"contentview_table_add"},[n("span",[t._v("新增商品:")]),t._v(" "),n("el-autocomplete",{staticStyle:{width:"500px","margin-top":"15px"},attrs:{"fetch-suggestions":t.querySearchAsync,placeholder:"请输入商品编号或商品名称搜索添加","trigger-on-focus":!1},on:{select:t.handleSelect},model:{value:t.selectGood,callback:function(e){t.selectGood=e},expression:"selectGood"}}),t._v(" "),n("span",{staticStyle:{"font-size":"16px",color:"#1B6DC5"}},[t._v("可直接在左侧搜索框搜索选择商品添加")])],1),t._v(" "),n("el-button",{staticClass:"btn_sub",attrs:{type:"primary"},on:{click:function(e){return t.balance()}}},[t._v(t._s(t.getIsPurchaseSettlePow?"提交订单":"提交预订单"))])],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"iv_top"},[e("span",{staticStyle:{"padding-left":"32px","font-weight":"bold"}},[this._v("采购单管理-编辑")])])}],!1,null,"da9ca306",null);component.options.__file="editPurchaseOrder.vue";e.default=component.exports},380:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAjCAYAAACD1LrRAAADVUlEQVRYR+2XTWhcVRTH/+e+N3E6TpAybfxApRGyeH1fDElpM2pFKy2oCytFQSiFQlFM0dJdu3DnolAVF91IXVS3XTULUdTpKiVCAzNvJhlE1BaJCxktmn7Nx/3LgSk0dJpJ+gpCyYW3efee87v33HPPh+B/GrJa7tzc3GbXdbeS3GyMeQTAEIB/AVwheanVajUmJibaq9U3EEzSrdVqUwDeJPk0gLyIZPU/gJskrwP4yxhTF5GPgyCYAcBBG1gRvLi4mGs2m1+SfAOAnuYqgDkRuQRgCcBjJLcC2AIgR7I5NDT0uud5Cl9xrAhOkmQvyTNqTsdxPjLGnPU8r3m7xnK57I6MjATW2ndJ7heRShiGpbTgtwCcJnksDMNTInJXE1ar1Y0i8hWAp8IwjFOBVVgVRlH09yBFOj8zM7NhcnKyLSKdQeslSZLIWrtFRAY62iBlq5mneqXrXlawOsJ2kmY1gmnXiIgFcFHB6rH6OSKywVq7B0BXRKbTQlSe5GsikgHwPYB/SFpjzPQy8zYajSdardZFADeiKBq9H+AkSX4muRHAs1EUNW7pXAffYeokSXZba/daa08Ui8XfSMrCwsKuTqfz6tLS0vFSqaQhE7qO5HPdbveTYrF45ZZJ79nUSZKcI/kSyak4js+Uy+VsoVA4CWAqk8mUPM+70ANPK7jdbpfGx8cXUoOr1eq36hjGmA+CIDitQSKfz38G4JDjOLt83/+hF2i+02fpOM523/fn18Frfk7rpl53rgfyOX1Ncqcx5v0wDL/QOx4eHv6U5Dsi8mIYhud7AUQDzQ7HcXbclwBSqVQOiMhRx3He9n2/rrG6Xq/vJ3k4n8/vHB0dvaHgWq12gOS+bDZ7cGxs7M/UkSttTr7nJPFgg+fn5x/vdDo/ApAoip5Me9peurxM8qFMJvO853k/9S19ZmdnC7lcTvPvNmPMniAIymng9XpdCwNNmw2Sr8Rx/HtfsLYjhULhGIAPAWirokJ/rNRB9NuYer6IbLLWviwij4rI58aYI77vt/qC9aeau9vtniL5AoBhANoVrrXY11an22tjZ0m+F8fxr7dvsq/CSqXysDFmN4BnrLV5Y9ZW61trYYy5Zq39xXXdb3zf185y2VjrSdJc+TLZ/wArAAYXDcRYDQAAAABJRU5ErkJggg=="},499:function(t,e,r){var content=r(785);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(19).default)("1bab2430",content,!0,{sourceMap:!1})},784:function(t,e,r){"use strict";var n=r(499);r.n(n).a},785:function(t,e,r){(t.exports=r(18)(!1)).push([t.i,'.pageview[data-v-da9ca306]{width:100%;height:100%}.tableview[data-v-da9ca306]{margin-top:20px}.setterview[data-v-da9ca306]{margin-top:50px;text-align:right}.iv_top[data-v-da9ca306]{width:100%;margin:0 auto;display:table;content:" ";border:1px solid #ececec;padding:11px 0;font-size:14px;color:#000}.buylist[data-v-da9ca306]{color:#858585;background:#f5f5f5;height:40px;line-height:40px;margin-top:20px;text-align:center;margin-bottom:14px}.newslist[data-v-da9ca306]{text-align:center;border-left:1px solid #f1f1f1;border-right:1px solid #f1f1f1;border-top:1px solid #f1f1f1;height:60px;line-height:60px}.gv_line_sty[data-v-da9ca306]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.border[data-v-da9ca306]{border-right:1px solid #f1f1f1}.contentview_table_add[data-v-da9ca306]{font-size:14px;color:#333}.btn_sub[data-v-da9ca306]{width:137px;height:40px;margin-top:30px;margin-left:30px;font-size:16px;background-color:#1b6dc5}',""])}}]);