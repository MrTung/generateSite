(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{1350:function(t,e,r){"use strict";r.r(e);r(36),r(29);var n=r(3),o=r(5),d=r(6),l=r(4),c=r(78),h={asyncData:function(t){return{powMap:t.store.state.contain_power}},data:function(){return{quirytitle:"",createTime:"",startTime:"",endTime:"",state:"",companyId:"",companyList:[],indexPage:1,pageSize:10,pageCount:0,quiryStateList:[{state:"",label:"全部"},{state:"tosubmit",label:"待提交"},{state:"submit",label:"已提交"},{state:"feedback",label:"已报价"},{state:"expired",label:"已过期"},{state:"cancel",label:"已取消"}],tableData:[],powMap:{isNewQueryPow:!1,isQueryEditPow:!1,isQueryDeletePow:!1,isQueryPrintPow:!1,isQueryToPurchasePow:!1}}},computed:{companyName:function(){return this.$store.state&&this.getUserInfo(this)?this.getUserInfo(this).companyName:""}},mounted:function(){this.getCompanys(),this.questSaveQuiry(),this.powMap=this.getPower(this)},methods:{createQuiry:function(){this.$router.push({path:"/profile/newquiryorder/",query:{type:"new",id:0}})},questSaveQuiry:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e,r,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e={},e=this.startTime?{orderName:this.quirytitle?this.quirytitle:"",beginDate:this.startTime?this.startTime:"",endDate:this.endTime?this.endTime:"",companyId:this.companyId,orderStatus:this.state,pageNum:this.indexPage,pageSize:this.pageSize}:{orderName:this.quirytitle?this.quirytitle:"",orderStatus:this.state,companyId:this.companyId,pageNum:this.indexPage,pageSize:this.pageSize},t.next=4,Object(d.a)(this,o.a.GetAllDemandOrderUrl,e,"GET");case 4:if(r=t.sent){for(n=0;n<r.data.list.length;n++)r.data.list[n].gmtCreate=Object(l.k)(r.data.list[n].gmtCreate),r.data.list[n].proposalOrderIndate=Object(l.j)(r.data.list[n].proposalOrderIndate),r.data.list[n].statusName=Object(l.h)(r.data.list[n].orderStatus);this.tableData=r.data.list,this.pageCount=r.data.pageCount,this.tableData.forEach(function(element){element.num="-";var t=0;element.list&&(element.list.forEach(function(e){t+=e.amount}),element.num=t)})}case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getCompanys:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.getUserInfo(this),r=e.companyId,t.next=4,Object(c.b)(this,r);case 4:this.companyList=t.sent;case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),dateChange:function(){this.createTime?(this.startTime=this.createTime[0],this.endTime=this.createTime[1]):(this.startTime="",this.endTime="")},handleClick:function(t){this.$router.push({path:"/profile/newquiryorder/",query:{type:"edit",id:t}})},handlelookClick:function(t){this.$router.push({path:"/profile/newquiryorder/",query:{type:"look",id:t}})},handleCancelClick:function(t,e){var r=this;this.$confirm("是否取消该询价单？","提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){r.CancelOrder(t,e)}).catch(function(){})},CancelOrder:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(e,r){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={orderId:r},t.next=3,Object(d.a)(this,o.a.CancelDemandOrderUrl,n,"GET");case 3:t.sent&&this.questSaveQuiry();case 5:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),handlePrintClick:function(t){this.$router.push({path:"/purchaseContract/",query:{id:t}})},handlePurchaseClick:function(t){this.$router.push({path:"/order/portqueryorderlist/",query:{id:t,type:"quiry"}})},handleSizeChange:function(t){alert("每页 ".concat(t," 条"))},handleCurrentChange:function(t){this.indexPage=t,this.questSaveQuiry()}}},v=(r(824),r(20)),component=Object(v.a)(h,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pageview"},[n("div",{staticClass:"powerview"},[n("div",{staticClass:"enquiry_top"},[n("p",{staticClass:"enquiry_title"},[t._v("我的询价单")]),t._v(" "),t.powMap.isNewQueryPow?n("p",{staticClass:"neworderbtn",on:{click:function(e){return t.createQuiry()}}},[n("img",{staticStyle:{width:"18px",height:"18px"},attrs:{src:r(509)}}),t._v(" "),n("span",{staticStyle:{"vertical-align":"sub"}},[t._v("新建询价单")])]):t._e()]),t._v(" "),n("div",{staticClass:"powerview_select"},[n("span",{staticClass:"topspan"},[t._v("询价单标题")]),t._v(" "),n("customInput",{staticStyle:{float:"left",width:"140px","padding-top":"5px","margin-right":"10px"},attrs:{inputType:"filterstr",type:"text",placeholder:"请输入询价单标题","auto-complete":"off",size:"mini",maxlength:"15"},model:{value:t.quirytitle,callback:function(e){t.quirytitle=e},expression:"quirytitle"}}),t._v(" "),n("span",{staticClass:"topspan"},[t._v("创建时间")]),t._v(" "),n("el-date-picker",{staticStyle:{width:"250px",float:"left","margin-top":"5px","margin-right":"10px"},attrs:{editable:!1,size:"mini",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd",format:"yyyy-MM-dd"},on:{change:t.dateChange},model:{value:t.createTime,callback:function(e){t.createTime=e},expression:"createTime"}}),t._v(" "),n("span",{staticClass:"topspan"},[t._v("询价单状态")]),t._v(" "),n("el-select",{staticStyle:{float:"left",width:"140px","padding-top":"5px"},attrs:{size:"mini",placeholder:"请选择"},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},t._l(t.quiryStateList,function(t){return n("el-option",{key:t.state,attrs:{label:t.label,value:t.state}})}),1),t._v(" "),n("el-button",{staticClass:"search_btn",attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.questSaveQuiry()}}},[t._v("搜索")])],1),t._v(" "),n("div",{staticClass:"enquiry_detail"},[n("el-row",{staticClass:"enquiry_head"},[n("el-col",{attrs:{span:4}},[n("div",{staticClass:"grid-content "},[t._v("询价单标题")])]),t._v(" "),n("el-col",{attrs:{span:3}},[n("div",{staticClass:"grid-content "},[t._v("商品数量")])]),t._v(" "),n("el-col",{attrs:{span:3}},[n("div",{staticClass:"grid-content "},[t._v("报价金额")])]),t._v(" "),n("el-col",{attrs:{span:3}},[n("div",{staticClass:"grid-content "},[t._v("订单状态")])]),t._v(" "),n("el-col",{attrs:{span:4}},[n("div",{staticClass:"grid-content "},[t._v("联系人")])]),t._v(" "),n("el-col",{attrs:{span:4}},[n("div",{staticClass:"grid-content "},[t._v("公司名称")])]),t._v(" "),n("el-col",{attrs:{span:3}},[n("div",{staticClass:"grid-content "},[t._v("操作")])])],1),t._v(" "),t._l(t.tableData,function(e,r){return n("div",{key:r},[n("el-row",{staticClass:"enquiry_list"},[n("el-col",{attrs:{span:12}},[n("div",{staticClass:"grid-content"},[t._v("创建时间："+t._s(e.gmtCreate))])]),t._v(" "),n("el-col",{attrs:{span:12}},[n("div",{staticClass:"grid-content tar"},[t._v("截止日期："+t._s(e.proposalOrderIndate))])])],1),t._v(" "),n("el-row",{staticClass:"enquiry_body"},[n("el-col",{attrs:{span:4}},[n("div",{staticClass:"grid-content ordername",attrs:{prop:"orderName"}},[t._v(t._s(e.orderName))])]),t._v(" "),n("el-col",{attrs:{span:3}},[n("div",{staticClass:"grid-content",attrs:{prop:"num"}},[t._v(t._s(e.count||"-"))])]),t._v(" "),n("el-col",{attrs:{span:3}},[n("div",{staticClass:"grid-content",attrs:{prop:"totalPrice"}},[t._v(t._s(e.totalPrice))])]),t._v(" "),n("el-col",{attrs:{span:3}},[n("div",{staticClass:"grid-content",attrs:{prop:"statusName"}},[t._v(t._s(e.statusName))])]),t._v(" "),n("el-col",{attrs:{span:4}},[n("div",{staticClass:"grid-content",attrs:{prop:"contactPerson"}},[t._v(t._s(e.contactPerson||"-"))])]),t._v(" "),n("el-col",{attrs:{span:4}},[n("div",{staticClass:"grid-content",attrs:{prop:"companyName"}},[t._v(t._s(e.companyName))])]),t._v(" "),n("el-col",{attrs:{span:3}},[n("div",{staticClass:"grid-content btn"},[n("div",{staticClass:"button"},[n("a",{directives:[{name:"show",rawName:"v-show",value:"tosubmit"==e.orderStatus&&t.powMap.isQueryEditPow,expression:"item.orderStatus == 'tosubmit' && powMap.isQueryEditPow"}],staticClass:"operationStyle order_edit_h",attrs:{type:"text",size:"medium"},on:{click:function(r){return t.handleClick(e.orderId)}}},[t._v("编辑")]),t._v(" "),n("a",{directives:[{name:"show",rawName:"v-show",value:"tosubmit"!=e.orderStatus,expression:"item.orderStatus != 'tosubmit'"}],staticClass:"operationStyle",class:"tosubmit"==e.orderStatus&&(t.powMap.isQueryEditPow||t.powMap.isQueryDeletePow)||"feedback"==e.orderStatus&&(t.powMap.isQueryPrintPow||t.powMap.isQueryToPurchasePow)?"mb8":"mb0",attrs:{type:"text",size:"medium"},on:{click:function(r){return t.handlelookClick(e.orderId)}}},[t._v("详情")]),t._v(" "),"tosubmit"==e.orderStatus&&t.powMap.isQueryDeletePow?n("a",{staticClass:"operationStyle order_edit_h",attrs:{type:"text",size:"medium"},on:{click:function(r){return t.handleCancelClick(t.tableData.$index,e.orderId)}}},[t._v("取消")]):t._e(),t._v(" "),"feedback"==e.orderStatus&&t.powMap.isQueryPrintPow?n("a",{staticClass:"operationStyle order_edit_h",attrs:{type:"text",size:"medium"},on:{click:function(r){return t.handlePrintClick(e.orderId)}}},[t._v("报价查看")]):t._e(),t._v(" "),"feedback"==e.orderStatus&&t.powMap.isQueryToPurchasePow?n("a",{staticClass:"operationStyle btn_a",attrs:{type:"text",size:"medium"},on:{click:function(r){return t.handlePurchaseClick(e.orderId)}}},[t._v("我要采购")]):t._e()])])])],1)],1)})],2),t._v(" "),n("div",{staticClass:"prowerview_paging"},[n("el-pagination",{attrs:{"current-page":t.indexPage,"page-size":t.pageSize,layout:"prev, pager, next,total, jumper",total:t.pageCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.indexPage=e},"update:current-page":function(e){t.indexPage=e}}})],1)])])},[],!1,null,"213bebed",null);component.options.__file="enquiryorder.vue";e.default=component.exports},509:function(t,e,r){t.exports=r.p+"img/bc40cd7.svg"},517:function(t,e,r){var content=r(825);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(19).default)("b4c15d20",content,!0,{sourceMap:!1})},824:function(t,e,r){"use strict";var n=r(517);r.n(n).a},825:function(t,e,r){(t.exports=r(18)(!1)).push([t.i,".pageview[data-v-213bebed]{width:100%;height:100%}.powerview[data-v-213bebed]{width:100%;font-size:14px}.enquiry_top[data-v-213bebed]{height:44px;line-height:44px;border:1px solid #f1f1f1;margin-bottom:20px}.enquiry_top .enquiry_title[data-v-213bebed]{margin-left:32px;margin-right:376px;color:#333;font-weight:700}.enquiry_top p[data-v-213bebed]{float:left}.search_input[data-v-213bebed]{border:1px solid #ececec;width:940px;height:36px;line-height:36px;padding-left:35px;outline:none;margin-bottom:20px}.search_btn[data-v-213bebed]{width:115px;height:40px;float:right;font-size:14px;border-radius:2px;background:#ececec;outline:none;border:none;color:#333}.enquiry_top .neworderbtn[data-v-213bebed]{float:right;color:#333;text-align:center;font-size:14px;margin-right:40px;cursor:pointer}.powerview_select[data-v-213bebed]{height:30px;margin-top:10px}.powerview_select .topspan[data-v-213bebed]{float:left;padding-top:8px;margin-right:10px}.enquiry_head[data-v-213bebed]{margin-top:20px;text-align:center;margin-bottom:20px}.enquiry_head[data-v-213bebed],.enquiry_list[data-v-213bebed]{color:#787878;background:#f5f5f5;height:40px;line-height:40px}.enquiry_list .grid-content[data-v-213bebed]{margin-left:30px}.enquiry_list .grid-content.tar[data-v-213bebed]{text-align:right;margin-right:30px}.enquiry_body[data-v-213bebed]{height:100px;line-height:100px;background:#fff;text-align:center;margin-bottom:20px;border:1px solid #f1f1f1}.btn[data-v-213bebed]{height:100px;line-height:15px;display:table;border-left:1px solid #f1f1f1}.btn[data-v-213bebed],.button[data-v-213bebed]{width:100%;vertical-align:middle}.button[data-v-213bebed]{height:100%;margin:auto;display:table-cell}.operationStyle[data-v-213bebed]{display:block;text-align:center;width:100%;margin-left:0}.order_edit_h[data-v-213bebed]{margin-bottom:8px}.btn_a[data-v-213bebed]{display:block;width:70px;background:#0d76e7;margin-left:30px;padding:4px;color:#fff;border-radius:3px}.ordername[data-v-213bebed]{width:181px;overflow:hidden;white-space:nowrap;padding:0 15px;text-overflow:ellipsis}.mb0[data-v-213bebed]{margin-bottom:0}.mb8[data-v-213bebed]{margin-bottom:8px}",""])}}]);